{"version":3,"file":"page-exportpage-BJblAL28.js","sources":["../../src/pages/ExportPage.js"],"sourcesContent":["/**\n * Export/Import Page\n * Export and import PIM configuration\n */\n\nimport { BasePage } from '../core/PageRouter.js';\n\nexport class ExportPage extends BasePage {\n    constructor(app) {\n        super(app);\n    }\n\n    /**\n     * Render Export/Import page\n     * @param {HTMLElement} container - Page container\n     * @param {Object} params - Optional parameters\n     */\n    async render(container, params = {}) {\n        container.innerHTML = `\n            <h1 class=\"page-header\">Import / Export</h1>\n\n            <div class=\"export-grid\">\n                <div class=\"card\">\n                    <div class=\"card-header-icon\">\n                        <i class=\"fas fa-file-export primary\"></i>\n                        <h2>Export</h2>\n                    </div>\n                    <p>Export your PIM configuration for backup or migration.</p>\n\n                    <div class=\"checkbox-group\">\n                        <label><input type=\"checkbox\" id=\"export-groups\" checked> PIM Groups</label>\n                        <label><input type=\"checkbox\" id=\"export-policies\" checked> Policy Configurations</label>\n                        <label><input type=\"checkbox\" id=\"export-assignments\" checked> Role Assignments</label>\n                    </div>\n\n                    <select class=\"input\" id=\"export-format\" aria-label=\"Export format\">\n                        <option value=\"json\">JSON (Full Configuration)</option>\n                        <option value=\"csv\">CSV (Audit Report)</option>\n                    </select>\n\n                    <button class=\"btn btn-primary\" onclick=\"app.pages.export.exportConfig()\" ${!this.isConnected() ? 'disabled' : ''} aria-label=\"Export configuration\">\n                        <i class=\"fas fa-download\"></i> Export\n                    </button>\n                </div>\n\n                <div class=\"card\">\n                    <div class=\"card-header-icon\">\n                        <i class=\"fas fa-file-import secondary\"></i>\n                        <h2>Import</h2>\n                    </div>\n                    <p>Import PIM configuration from a JSON file.</p>\n\n                    <div class=\"drop-zone\" id=\"import-drop-zone\">\n                        <i class=\"fas fa-cloud-upload-alt\"></i>\n                        <p>Drop file here or click to browse</p>\n                    </div>\n\n                    <button class=\"btn btn-secondary\" onclick=\"document.getElementById('import-file').click()\" ${!this.isConnected() ? 'disabled' : ''} aria-label=\"Browse for import file\">\n                        <i class=\"fas fa-folder-open\"></i> Browse Files\n                    </button>\n                    <input type=\"file\" id=\"import-file\" accept=\".json\" style=\"display:none\" onchange=\"app.pages.export.handleImport(this.files)\">\n                </div>\n            </div>\n        `;\n\n        // Setup drag & drop\n        this.setupDropZone();\n    }\n\n    /**\n     * Setup drag and drop zone\n     */\n    setupDropZone() {\n        const dropZone = document.getElementById('import-drop-zone');\n        if (!dropZone) return;\n\n        dropZone.addEventListener('dragover', (e) => {\n            e.preventDefault();\n            dropZone.classList.add('drag-over');\n        });\n\n        dropZone.addEventListener('dragleave', () => {\n            dropZone.classList.remove('drag-over');\n        });\n\n        dropZone.addEventListener('drop', (e) => {\n            e.preventDefault();\n            dropZone.classList.remove('drag-over');\n            this.handleImport(e.dataTransfer.files);\n        });\n\n        dropZone.addEventListener('click', () => {\n            document.getElementById('import-file').click();\n        });\n    }\n\n    /**\n     * Export configuration\n     */\n    async exportConfig() {\n        const includeGroups = document.getElementById('export-groups').checked;\n        const includePolicies = document.getElementById('export-policies').checked;\n        const includeAssignments = document.getElementById('export-assignments').checked;\n        const format = document.getElementById('export-format').value;\n\n        // For now, show a message that export is a complex feature\n        this.showToast(`Export functionality - Implementation pending (${format} format)`, 'info');\n\n        // TODO: Implement full export with data collection and file download\n        // See original app.js for reference implementation\n    }\n\n    /**\n     * Handle import file\n     * @param {FileList} files - Files to import\n     */\n    handleImport(files) {\n        if (!files || files.length === 0) return;\n\n        const file = files[0];\n        if (!file.name.endsWith('.json')) {\n            this.showToast('Please select a JSON file', 'error');\n            return;\n        }\n\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            try {\n                const config = JSON.parse(e.target.result);\n                this.showToast(`Imported configuration from ${file.name} - Application pending`, 'info');\n\n                // TODO: Implement full import with validation and application\n                // See original app.js for reference implementation\n            } catch (error) {\n                this.showToast('Invalid JSON file', 'error');\n            }\n        };\n        reader.readAsText(file);\n    }\n\n    /**\n     * Refresh page data\n     */\n    async refreshPage() {\n        await this.app.router.refreshCurrentPage();\n    }\n}\n"],"names":["ExportPage","BasePage","app","container","params","dropZone","e","format","files","file","reader","config"],"mappings":"uCAOO,MAAMA,UAAmBC,CAAS,CACrC,YAAYC,EAAK,CACb,MAAMA,CAAG,CACb,CAOA,MAAM,OAAOC,EAAWC,EAAS,GAAI,CACjCD,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gGAsBmE,KAAK,cAA6B,GAAb,UAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iHAiBnB,KAAK,cAA6B,GAAb,UAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAS9I,KAAK,cAAa,CACtB,CAKA,eAAgB,CACZ,MAAME,EAAW,SAAS,eAAe,kBAAkB,EACtDA,IAELA,EAAS,iBAAiB,WAAaC,GAAM,CACzCA,EAAE,eAAc,EAChBD,EAAS,UAAU,IAAI,WAAW,CACtC,CAAC,EAEDA,EAAS,iBAAiB,YAAa,IAAM,CACzCA,EAAS,UAAU,OAAO,WAAW,CACzC,CAAC,EAEDA,EAAS,iBAAiB,OAASC,GAAM,CACrCA,EAAE,eAAc,EAChBD,EAAS,UAAU,OAAO,WAAW,EACrC,KAAK,aAAaC,EAAE,aAAa,KAAK,CAC1C,CAAC,EAEDD,EAAS,iBAAiB,QAAS,IAAM,CACrC,SAAS,eAAe,aAAa,EAAE,MAAK,CAChD,CAAC,EACL,CAKA,MAAM,cAAe,CACK,SAAS,eAAe,eAAe,EAAE,QACvC,SAAS,eAAe,iBAAiB,EAAE,QACxC,SAAS,eAAe,oBAAoB,EAAE,QACzE,MAAME,EAAS,SAAS,eAAe,eAAe,EAAE,MAGxD,KAAK,UAAU,kDAAkDA,CAAM,WAAY,MAAM,CAI7F,CAMA,aAAaC,EAAO,CAChB,GAAI,CAACA,GAASA,EAAM,SAAW,EAAG,OAElC,MAAMC,EAAOD,EAAM,CAAC,EACpB,GAAI,CAACC,EAAK,KAAK,SAAS,OAAO,EAAG,CAC9B,KAAK,UAAU,4BAA6B,OAAO,EACnD,MACJ,CAEA,MAAMC,EAAS,IAAI,WACnBA,EAAO,OAAUJ,GAAM,CACnB,GAAI,CACA,MAAMK,EAAS,KAAK,MAAML,EAAE,OAAO,MAAM,EACzC,KAAK,UAAU,+BAA+BG,EAAK,IAAI,yBAA0B,MAAM,CAI3F,MAAgB,CACZ,KAAK,UAAU,oBAAqB,OAAO,CAC/C,CACJ,EACAC,EAAO,WAAWD,CAAI,CAC1B,CAKA,MAAM,aAAc,CAChB,MAAM,KAAK,IAAI,OAAO,mBAAkB,CAC5C,CACJ"}