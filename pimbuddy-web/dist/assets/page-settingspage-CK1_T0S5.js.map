{"version":3,"file":"page-settingspage-CK1_T0S5.js","sources":["../../src/pages/SettingsPage.js"],"sourcesContent":["/**\n * Settings Page\n * App configuration and preferences\n */\n\nimport { BasePage } from '../core/PageRouter.js';\nimport { getSavedAppConfig } from '../config/authConfig.js';\n\nexport class SettingsPage extends BasePage {\n    constructor(app) {\n        super(app);\n    }\n\n    /**\n     * Render Settings page\n     * @param {HTMLElement} container - Page container\n     * @param {Object} params - Optional parameters\n     */\n    async render(container, params = {}) {\n        const config = getSavedAppConfig();\n\n        container.innerHTML = `\n            <h1 class=\"page-header\">Settings</h1>\n\n            <div class=\"settings-container\">\n                <div class=\"card\">\n                    <h2>Appearance</h2>\n                    <div class=\"setting-row\">\n                        <div>\n                            <strong>Theme</strong>\n                            <p>Choose between light and dark mode</p>\n                        </div>\n                        <select class=\"input\" id=\"theme-select\" onchange=\"app.setTheme(this.value)\" aria-label=\"Theme selection\">\n                            <option value=\"light\" ${!this.app.isDarkMode ? 'selected' : ''}>Light</option>\n                            <option value=\"dark\" ${this.app.isDarkMode ? 'selected' : ''}>Dark</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class=\"card\">\n                    <h2>App Configuration</h2>\n                    ${config ? `\n                        <div class=\"config-info\">\n                            <p><strong>Client ID:</strong> <code>${this.escapeHtml(config.clientId)}</code></p>\n                            <p><strong>Tenant ID:</strong> <code>${this.escapeHtml(config.tenantId)}</code></p>\n                            <p><strong>Configured:</strong> ${new Date(config.createdAt).toLocaleString()}</p>\n                        </div>\n                        <button class=\"btn btn-secondary\" onclick=\"app.resetSetup()\" aria-label=\"Reset configuration\">\n                            <i class=\"fas fa-redo\"></i> Reset Configuration\n                        </button>\n                    ` : `\n                        <p>App is not configured.</p>\n                        <button class=\"btn btn-primary\" onclick=\"app.showSetupWizard()\" aria-label=\"Run setup wizard\">\n                            <i class=\"fas fa-magic\"></i> Run Setup\n                        </button>\n                    `}\n                </div>\n\n                <div class=\"card\">\n                    <h2>Cache Management</h2>\n                    <div class=\"setting-row\">\n                        <div>\n                            <strong>Cache Statistics</strong>\n                            <p>View and manage application cache</p>\n                        </div>\n                        <button class=\"btn btn-secondary\" onclick=\"app.pages.settings.showCacheStats()\" aria-label=\"View cache statistics\">\n                            <i class=\"fas fa-chart-bar\"></i> View Stats\n                        </button>\n                    </div>\n                    <div class=\"setting-row\">\n                        <div>\n                            <strong>Clear Cache</strong>\n                            <p>Clear all cached data and force fresh reload</p>\n                        </div>\n                        <button class=\"btn btn-danger\" onclick=\"app.pages.settings.clearCache()\" aria-label=\"Clear cache\">\n                            <i class=\"fas fa-trash\"></i> Clear Cache\n                        </button>\n                    </div>\n                </div>\n\n                <div class=\"card\">\n                    <h2>About</h2>\n                    <p><strong>PIMBuddy Web</strong> v1.0.0</p>\n                    <p class=\"caption\">Privileged Identity Management Tool for Microsoft Entra ID</p>\n                    <p class=\"caption\">Built with MSAL.js and Microsoft Graph API</p>\n                    <div style=\"margin-top: var(--space-md);\">\n                        <p class=\"caption\">\n                            <i class=\"fas fa-code\"></i> Modular architecture with TTL-based caching\n                        </p>\n                        <p class=\"caption\">\n                            <i class=\"fas fa-shield-alt\"></i> Zero Trust compliant\n                        </p>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Show cache statistics\n     */\n    showCacheStats() {\n        const stats = this.app.cacheManager.getStats();\n        const cacheData = this.app.cacheManager.exportState();\n\n        const html = `\n            <h2><i class=\"fas fa-chart-bar\"></i> Cache Statistics</h2>\n\n            <div class=\"stats-grid\" style=\"margin-bottom: var(--space-lg);\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-value\">${stats.size}</div>\n                    <div class=\"stat-label\">Cached Items</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-value\">${stats.hits}</div>\n                    <div class=\"stat-label\">Cache Hits</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-value\">${stats.misses}</div>\n                    <div class=\"stat-label\">Cache Misses</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-value\">${stats.hitRate}</div>\n                    <div class=\"stat-label\">Hit Rate</div>\n                </div>\n            </div>\n\n            <h3>Cached Data</h3>\n            <div style=\"max-height: 300px; overflow-y: auto; background: var(--bg-surface); padding: var(--space-md); border-radius: var(--radius-md); font-family: var(--font-mono); font-size: 0.8rem;\">\n                ${Object.keys(cacheData).length > 0 ? Object.keys(cacheData).map(key => `\n                    <div style=\"padding: var(--space-xs) 0; border-bottom: 1px solid var(--border-subtle);\">\n                        <strong>${this.escapeHtml(key)}</strong>\n                        <span style=\"color: var(--text-muted); font-size: 0.75rem;\">\n                            (TTL: ${Math.floor(cacheData[key].remainingTTL / 1000)}s remaining)\n                        </span>\n                    </div>\n                `).join('') : '<p style=\"color: var(--text-muted);\">No cached data</p>'}\n            </div>\n\n            <div class=\"modal-actions\">\n                <button type=\"button\" class=\"btn btn-secondary\" onclick=\"app.closeModal()\">Close</button>\n                <button type=\"button\" class=\"btn btn-danger\" onclick=\"app.closeModal(); app.pages.settings.clearCache()\">\n                    <i class=\"fas fa-trash\"></i> Clear Cache\n                </button>\n            </div>\n        `;\n\n        this.showModal(html);\n    }\n\n    /**\n     * Clear cache\n     */\n    clearCache() {\n        this.app.cacheManager.clear();\n        this.showToast('Cache cleared successfully', 'success');\n\n        // Refresh current page to reload data\n        this.app.router.refreshCurrentPage();\n    }\n\n    /**\n     * Refresh page data\n     */\n    async refreshPage() {\n        await this.app.router.refreshCurrentPage();\n    }\n}\n"],"names":["SettingsPage","BasePage","app","container","params","config","getSavedAppConfig","stats","cacheData","html","key"],"mappings":"kFAQO,MAAMA,UAAqBC,CAAS,CACvC,YAAYC,EAAK,CACb,MAAMA,CAAG,CACb,CAOA,MAAM,OAAOC,EAAWC,EAAS,GAAI,CACjC,MAAMC,EAASC,EAAiB,EAEhCH,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAYuB,KAAK,IAAI,WAA0B,GAAb,UAAe;AAAA,mDACvC,KAAK,IAAI,WAAa,WAAa,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOlEE,EAAS;AAAA;AAAA,mEAEoC,KAAK,WAAWA,EAAO,QAAQ,CAAC;AAAA,mEAChC,KAAK,WAAWA,EAAO,QAAQ,CAAC;AAAA,8DACrC,IAAI,KAAKA,EAAO,SAAS,EAAE,eAAc,CAAE;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKjF;AAAA;AAAA;AAAA;AAAA;AAAA,qBAKH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAyCjB,CAKA,gBAAiB,CACb,MAAME,EAAQ,KAAK,IAAI,aAAa,SAAQ,EACtCC,EAAY,KAAK,IAAI,aAAa,YAAW,EAE7CC,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,8CAKyBF,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,8CAIVA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,8CAIVA,EAAM,MAAM;AAAA;AAAA;AAAA;AAAA,8CAIZA,EAAM,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOzC,OAAO,KAAKC,CAAS,EAAE,OAAS,EAAI,OAAO,KAAKA,CAAS,EAAE,IAAIE,GAAO;AAAA;AAAA,kCAEtD,KAAK,WAAWA,CAAG,CAAC;AAAA;AAAA,oCAElB,KAAK,MAAMF,EAAUE,CAAG,EAAE,aAAe,GAAI,CAAC;AAAA;AAAA;AAAA,iBAGjE,EAAE,KAAK,EAAE,EAAI,yDAAyD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAW/E,KAAK,UAAUD,CAAI,CACvB,CAKA,YAAa,CACT,KAAK,IAAI,aAAa,MAAK,EAC3B,KAAK,UAAU,6BAA8B,SAAS,EAGtD,KAAK,IAAI,OAAO,mBAAkB,CACtC,CAKA,MAAM,aAAc,CAChB,MAAM,KAAK,IAAI,OAAO,mBAAkB,CAC5C,CACJ"}