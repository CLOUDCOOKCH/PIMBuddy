{"version":3,"file":"page-groupspage-CcLYulAn.js","sources":["../../src/pages/GroupsPage.js"],"sourcesContent":["/**\n * Groups Page\n * Manage PIM-enabled security groups\n */\n\nimport { BasePage } from '../core/PageRouter.js';\nimport { graphService } from '../services/graphService.js';\nimport { CACHE_KEYS } from '../core/CacheManager.js';\nimport UIComponents from '../utils/uiComponents.js';\nimport { executeBulkOperation, renderBulkProgressModal, renderBulkResultsModal } from '../utils/bulkOperations.js';\n\nexport class GroupsPage extends BasePage {\n    constructor(app) {\n        super(app);\n        this.paginator = app.paginators.groups;\n        this.bulkOps = app.bulkOps.groups;\n    }\n\n    /**\n     * Render Groups page\n     * @param {HTMLElement} container - Page container\n     * @param {Object} params - Optional parameters\n     */\n    async render(container, params = {}) {\n        let allGroups = [];\n\n        if (this.isConnected()) {\n            this.showLoading('Loading groups...');\n\n            // Try cache first\n            allGroups = this.getCached(CACHE_KEYS.GROUPS.key);\n\n            if (!allGroups) {\n                const result = await graphService.getPIMGroups();\n                if (result.success) {\n                    allGroups = result.groups;\n                    this.setCached(CACHE_KEYS.GROUPS.key, allGroups);\n                } else {\n                    this.showToast(`Failed to load groups: ${result.error}`, 'error');\n                }\n            }\n\n            this.hideLoading();\n        }\n\n        allGroups = allGroups || [];\n\n        // Initialize bulk operations with all groups\n        this.bulkOps.initialize(allGroups, () => {\n            this.app.router.refreshCurrentPage();\n        });\n\n        // Update paginator with all groups\n        this.paginator.updateItems(allGroups);\n\n        // Get current page items\n        const groups = this.paginator.getCurrentPageItems();\n\n        container.innerHTML = `\n            <div class=\"page-header-row\">\n                <h1 class=\"page-header\">PIM Groups</h1>\n                <button class=\"btn btn-primary\" onclick=\"app.pages.groups.showCreateGroup()\" ${!this.isConnected() ? 'disabled' : ''}>\n                    <i class=\"fas fa-plus\"></i> Create Group\n                </button>\n            </div>\n\n            <div class=\"toolbar\">\n                <input type=\"text\" id=\"group-search\" class=\"input\" placeholder=\"Search groups...\" oninput=\"app.pages.groups.filterGroups(this.value)\">\n                <button class=\"btn btn-secondary\" onclick=\"app.exportUtils.showExportMenu('groups')\" ${!this.isConnected() || allGroups.length === 0 ? 'disabled' : ''}>\n                    <i class=\"fas fa-file-export\"></i> Export\n                </button>\n                <button class=\"btn btn-secondary\" onclick=\"app.pages.groups.refreshPage()\" ${!this.isConnected() ? 'disabled' : ''}>\n                    <i class=\"fas fa-sync\"></i> Refresh\n                </button>\n            </div>\n\n            ${this.bulkOps.renderBulkActionsToolbar([\n                {\n                    label: 'Delete',\n                    icon: 'fa-trash',\n                    variant: 'btn-danger',\n                    onClick: 'app.pages.groups.bulkDeleteGroups()',\n                    description: 'Delete selected groups'\n                },\n                {\n                    label: 'Export',\n                    icon: 'fa-file-export',\n                    variant: 'btn-secondary',\n                    onClick: 'app.pages.groups.bulkExportGroups()',\n                    description: 'Export selected groups'\n                }\n            ])}\n\n            <div class=\"card\">\n                <table class=\"data-table\" id=\"groups-table\">\n                    <thead>\n                        <tr>\n                            <th style=\"width: 40px;\">\n                                ${this.bulkOps.renderHeaderCheckbox('app.pages.groups.toggleAll')}\n                            </th>\n                            <th>Display Name</th>\n                            <th>Description</th>\n                            <th>Members</th>\n                            <th>Owners</th>\n                            <th>Created</th>\n                            <th>Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${groups.length > 0 ? groups.map(g => `\n                            <tr data-id=\"${g.id}\">\n                                <td>\n                                    ${this.bulkOps.renderRowCheckbox(g.id, 'app.pages.groups.toggleItem')}\n                                </td>\n                                <td><strong>${this.escapeHtml(g.displayName)}</strong></td>\n                                <td>${this.escapeHtml(g.description || '-')}</td>\n                                <td>${g.memberCount || 0}</td>\n                                <td>${g.ownerCount || 0}</td>\n                                <td>${g.createdDateTime ? new Date(g.createdDateTime).toLocaleDateString() : '-'}</td>\n                                <td>\n                                    <button class=\"icon-btn\" onclick=\"app.pages.groups.manageGroup('${g.id}')\" title=\"Manage\" aria-label=\"Manage group ${this.escapeHtml(g.displayName)}\">\n                                        <i class=\"fas fa-cog\" aria-hidden=\"true\"></i>\n                                    </button>\n                                    <button class=\"icon-btn danger\" onclick=\"app.pages.groups.deleteGroup('${g.id}')\" title=\"Delete\" aria-label=\"Delete group ${this.escapeHtml(g.displayName)}\">\n                                        <i class=\"fas fa-trash\" aria-hidden=\"true\"></i>\n                                    </button>\n                                </td>\n                            </tr>\n                        `).join('') : `\n                            <tr>\n                                <td colspan=\"7\" class=\"empty-state\">\n                                    ${this.isConnected() ? 'No PIM groups found' : 'Connect to view groups'}\n                                </td>\n                            </tr>\n                        `}\n                    </tbody>\n                </table>\n\n                ${this.paginator.renderControls('app.pages.groups.handlePageChange')}\n            </div>\n        `;\n    }\n\n    /**\n     * Filter groups by search query\n     * @param {string} query - Search query\n     */\n    filterGroups(query) {\n        const rows = document.querySelectorAll('#groups-table tbody tr');\n        const q = query.toLowerCase();\n\n        rows.forEach(row => {\n            const text = row.textContent.toLowerCase();\n            row.style.display = text.includes(q) ? '' : 'none';\n        });\n    }\n\n    /**\n     * Handle page change\n     * @param {number} page - Page number\n     */\n    handlePageChange(page) {\n        this.paginator.goToPage(page);\n        this.app.router.refreshCurrentPage();\n    }\n\n    /**\n     * Handle page size change\n     * @param {number} size - Page size\n     */\n    handlePageSizeChange(size) {\n        this.paginator.setPageSize(size);\n        this.app.router.refreshCurrentPage();\n    }\n\n    /**\n     * Refresh page data\n     */\n    async refreshPage() {\n        this.app.cacheManager.invalidate(CACHE_KEYS.GROUPS.key);\n        await this.app.router.refreshCurrentPage();\n    }\n\n    /**\n     * Show create group dialog\n     */\n    showCreateGroup() {\n        const content = `\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">Create PIM Group</h2>\n                <button class=\"modal-close\" onclick=\"app.closeModal()\" title=\"Close\">\n                    <i class=\"fas fa-times\"></i>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <form id=\"create-group-form\">\n                    <label class=\"form-label\">\n                        Display Name*\n                        <input type=\"text\" name=\"displayName\" class=\"input\" required maxlength=\"256\"\n                               placeholder=\"e.g., PIM-Global-Administrators\">\n                    </label>\n\n                    <label class=\"form-label\">\n                        Description\n                        <textarea name=\"description\" class=\"input\" rows=\"3\" maxlength=\"1024\"\n                                  placeholder=\"Purpose and scope of this group...\"></textarea>\n                    </label>\n\n                    <label class=\"form-label\">\n                        Mail Nickname*\n                        <input type=\"text\" name=\"mailNickname\" class=\"input\" required\n                               placeholder=\"e.g., pim-global-admins\"\n                               pattern=\"[a-zA-Z0-9-]+\"\n                               title=\"Only letters, numbers, and hyphens allowed\">\n                        <small class=\"form-hint\">Used for group email address (no spaces)</small>\n                    </label>\n\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" onclick=\"app.closeModal()\">\n                            Cancel\n                        </button>\n                        <button type=\"submit\" class=\"btn btn-primary\">\n                            <i class=\"fas fa-plus\"></i> Create Group\n                        </button>\n                    </div>\n                </form>\n            </div>\n        `;\n\n        this.showModal(content);\n\n        // Handle form submission\n        document.getElementById('create-group-form').addEventListener('submit', async (e) => {\n            e.preventDefault();\n            await this.handleCreateGroup(e.target);\n        });\n    }\n\n    /**\n     * Handle create group form submission\n     * @param {HTMLFormElement} form - Form element\n     */\n    async handleCreateGroup(form) {\n        const formData = new FormData(form);\n        const displayName = formData.get('displayName').trim();\n        const description = formData.get('description').trim();\n        const mailNickname = formData.get('mailNickname').trim();\n\n        this.closeModal();\n        this.showLoading('Creating group...');\n\n        const result = await graphService.createPIMGroup(displayName, description, mailNickname);\n\n        this.hideLoading();\n\n        if (result.success) {\n            this.showToast('Group created successfully', 'success');\n            this.refreshPage();\n        } else {\n            this.showToast(`Failed to create group: ${result.error}`, 'error');\n        }\n    }\n\n    /**\n     * Delete group with confirmation\n     * @param {string} groupId - Group ID\n     */\n    async deleteGroup(groupId) {\n        const allGroups = this.getCached(CACHE_KEYS.GROUPS.key) || [];\n        const group = allGroups.find(g => g.id === groupId);\n\n        if (!group) {\n            this.showToast('Group not found', 'error');\n            return;\n        }\n\n        const confirmDialog = UIComponents.renderConfirmDialog({\n            title: 'Delete PIM Group',\n            message: `Are you sure you want to delete \"${group.displayName}\"? This action cannot be undone.`,\n            confirmLabel: 'Delete Group',\n            confirmVariant: 'btn-danger',\n            icon: 'fa-trash',\n            iconColor: 'error',\n            onConfirm: `app.pages.groups.confirmDeleteGroup('${groupId}')`\n        });\n\n        this.showModal(confirmDialog);\n    }\n\n    /**\n     * Confirm delete group\n     * @param {string} groupId - Group ID\n     */\n    async confirmDeleteGroup(groupId) {\n        this.closeModal();\n        this.showLoading('Deleting group...');\n\n        const result = await graphService.deleteGroup(groupId);\n\n        this.hideLoading();\n\n        if (result.success) {\n            this.showToast('Group deleted successfully', 'success');\n            this.refreshPage();\n        } else {\n            this.showToast(`Failed to delete: ${result.error}`, 'error');\n        }\n    }\n\n    /**\n     * Manage group (members, owners, policies)\n     * @param {string} groupId - Group ID\n     */\n    async manageGroup(groupId) {\n        const allGroups = this.getCached(CACHE_KEYS.GROUPS.key) || [];\n        const group = allGroups.find(g => g.id === groupId);\n\n        if (!group) {\n            this.showToast('Group not found', 'error');\n            return;\n        }\n\n        this.showLoading('Loading group details...');\n\n        // Fetch members and owners\n        const [membersResult, ownersResult] = await Promise.all([\n            graphService.getGroupMembers(groupId),\n            graphService.getGroupOwners(groupId)\n        ]);\n\n        this.hideLoading();\n\n        const members = membersResult.success ? membersResult.members : [];\n        const owners = ownersResult.success ? ownersResult.owners : [];\n\n        const content = `\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">Manage Group: ${this.escapeHtml(group.displayName)}</h2>\n                <button class=\"modal-close\" onclick=\"app.closeModal()\" title=\"Close\">\n                    <i class=\"fas fa-times\"></i>\n                </button>\n            </div>\n            <div class=\"modal-body modal-lg\">\n                <div class=\"tabs\">\n                    <button class=\"tab-btn active\" onclick=\"app.pages.groups.switchTab('members')\">\n                        Members (${members.length})\n                    </button>\n                    <button class=\"tab-btn\" onclick=\"app.pages.groups.switchTab('owners')\">\n                        Owners (${owners.length})\n                    </button>\n                </div>\n\n                <div id=\"tab-members\" class=\"tab-content active\">\n                    <div class=\"tab-header\">\n                        <button class=\"btn btn-sm btn-primary\" onclick=\"app.pages.groups.addMember('${groupId}')\">\n                            <i class=\"fas fa-plus\"></i> Add Member\n                        </button>\n                    </div>\n                    ${this.renderMembersList(members, groupId, 'member')}\n                </div>\n\n                <div id=\"tab-owners\" class=\"tab-content\" style=\"display: none;\">\n                    <div class=\"tab-header\">\n                        <button class=\"btn btn-sm btn-primary\" onclick=\"app.pages.groups.addOwner('${groupId}')\">\n                            <i class=\"fas fa-plus\"></i> Add Owner\n                        </button>\n                    </div>\n                    ${this.renderMembersList(owners, groupId, 'owner')}\n                </div>\n            </div>\n        `;\n\n        this.showModal(content);\n    }\n\n    /**\n     * Render members/owners list\n     * @param {Array} members - List of members\n     * @param {string} groupId - Group ID\n     * @param {string} type - 'member' or 'owner'\n     * @returns {string} HTML\n     */\n    renderMembersList(members, groupId, type) {\n        if (members.length === 0) {\n            return `<p class=\"empty-state\">No ${type}s</p>`;\n        }\n\n        return `\n            <ul class=\"member-list\">\n                ${members.map(m => `\n                    <li class=\"member-item\">\n                        <div class=\"member-info\">\n                            <strong>${this.escapeHtml(m.displayName || m.userPrincipalName)}</strong>\n                            <small>${this.escapeHtml(m.userPrincipalName || m.mail || '')}</small>\n                        </div>\n                        <button class=\"btn btn-sm btn-danger\"\n                                onclick=\"app.pages.groups.removeMember('${groupId}', '${m.id}', '${type}', '${this.escapeHtml(m.displayName || m.userPrincipalName)}')\"\n                                aria-label=\"Remove ${type}\">\n                            <i class=\"fas fa-times\"></i> Remove\n                        </button>\n                    </li>\n                `).join('')}\n            </ul>\n        `;\n    }\n\n    /**\n     * Switch between tabs in manage group modal\n     * @param {string} tabName - Tab name\n     */\n    switchTab(tabName) {\n        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));\n        document.querySelectorAll('.tab-content').forEach(content => {\n            content.style.display = 'none';\n            content.classList.remove('active');\n        });\n\n        document.querySelector(`.tab-btn[onclick*=\"${tabName}\"]`)?.classList.add('active');\n        const targetTab = document.getElementById(`tab-${tabName}`);\n        if (targetTab) {\n            targetTab.style.display = 'block';\n            targetTab.classList.add('active');\n        }\n    }\n\n    /**\n     * Add member to group\n     * @param {string} groupId - Group ID\n     */\n    async addMember(groupId) {\n        // Implementation would show user search dialog\n        this.showToast('Add member functionality - coming soon', 'info');\n    }\n\n    /**\n     * Add owner to group\n     * @param {string} groupId - Group ID\n     */\n    async addOwner(groupId) {\n        // Implementation would show user search dialog\n        this.showToast('Add owner functionality - coming soon', 'info');\n    }\n\n    /**\n     * Remove member/owner from group\n     * @param {string} groupId - Group ID\n     * @param {string} memberId - Member ID\n     * @param {string} type - 'member' or 'owner'\n     */\n    removeMember(groupId, memberId, type, displayName = 'this user') {\n        // Show confirmation dialog\n        const confirmDialog = UIComponents.renderConfirmDialog({\n            title: `Remove ${type.charAt(0).toUpperCase() + type.slice(1)}`,\n            message: `Are you sure you want to remove \"${displayName}\" as a ${type}? They will lose access to this group's roles.`,\n            confirmLabel: `Remove ${type.charAt(0).toUpperCase() + type.slice(1)}`,\n            confirmVariant: 'btn-danger',\n            icon: 'fa-user-minus',\n            iconColor: 'warning',\n            onConfirm: `app.pages.groups.confirmRemoveMember('${groupId}', '${memberId}', '${type}')`\n        });\n\n        this.showModal(confirmDialog);\n    }\n\n    async confirmRemoveMember(groupId, memberId, type) {\n        this.closeModal();\n        this.showLoading(`Removing ${type}...`);\n\n        const result = type === 'member'\n            ? await graphService.removeGroupMember(groupId, memberId)\n            : await graphService.removeGroupOwner(groupId, memberId);\n\n        this.hideLoading();\n\n        if (result.success) {\n            this.showToast(`${type.charAt(0).toUpperCase() + type.slice(1)} removed successfully`, 'success');\n            // Refresh modal\n            this.manageGroup(groupId);\n        } else {\n            this.showToast(`Failed to remove ${type}: ${result.error}`, 'error');\n        }\n    }\n\n    /**\n     * Toggle item selection (for bulk operations)\n     * @param {string} itemId - Item ID\n     */\n    toggleItem(itemId) {\n        this.bulkOps.toggleItem(itemId);\n    }\n\n    /**\n     * Toggle all items selection (for bulk operations)\n     * @param {HTMLInputElement} checkbox - Header checkbox element\n     */\n    toggleAll(checkbox) {\n        if (checkbox.checked) {\n            this.bulkOps.selectAll();\n        } else {\n            this.bulkOps.clearSelection();\n        }\n    }\n\n    /**\n     * Bulk delete groups\n     */\n    bulkDeleteGroups() {\n        const selected = this.bulkOps.getSelectedItems();\n\n        if (selected.length === 0) {\n            this.showToast('No groups selected', 'warning');\n            return;\n        }\n\n        const confirmDialog = UIComponents.renderConfirmDialog({\n            title: 'Delete Multiple Groups',\n            message: `You are about to delete ${selected.length} group${selected.length === 1 ? '' : 's'}. This action cannot be undone. Are you sure?`,\n            confirmLabel: `Delete ${selected.length} Group${selected.length === 1 ? '' : 's'}`,\n            confirmVariant: 'btn-danger',\n            icon: 'fa-trash',\n            iconColor: 'error',\n            onConfirm: 'app.pages.groups.confirmBulkDeleteGroups()'\n        });\n\n        this.showModal(confirmDialog);\n    }\n\n    /**\n     * Confirm bulk delete groups\n     */\n    async confirmBulkDeleteGroups() {\n        this.closeModal();\n\n        const selected = this.bulkOps.getSelectedItems();\n\n        // Show progress modal\n        this.showModal(renderBulkProgressModal({\n            current: 0,\n            total: selected.length,\n            percentage: 0\n        }));\n\n        // Execute bulk operation\n        await executeBulkOperation(\n            selected,\n            async (group) => {\n                const result = await graphService.deleteGroup(group.id);\n                if (!result.success) {\n                    throw new Error(result.error);\n                }\n            },\n            (progress) => {\n                // Update progress modal\n                const modalBody = document.querySelector('.modal-body');\n                if (modalBody) {\n                    modalBody.innerHTML = renderBulkProgressModal(progress);\n                }\n            },\n            (results) => {\n                // Show results modal\n                this.showModal(renderBulkResultsModal(results));\n\n                // Refresh page and clear selection\n                if (results.succeeded > 0) {\n                    this.refreshPage();\n                }\n                this.bulkOps.clearSelection();\n            }\n        );\n    }\n\n    /**\n     * Bulk export groups\n     */\n    bulkExportGroups() {\n        const selected = this.bulkOps.getSelectedItems();\n\n        if (selected.length === 0) {\n            this.showToast('No groups selected', 'warning');\n            return;\n        }\n\n        // Use the existing export functionality but with selected items only\n        this.app.exportUtils.exportGroups(selected);\n        this.showToast(`Exported ${selected.length} group${selected.length === 1 ? '' : 's'}`, 'success');\n    }\n}\n"],"names":["GroupsPage","BasePage","app","container","params","allGroups","CACHE_KEYS","result","graphService","groups","g","query","rows","q","row","text","page","size","e","form","formData","displayName","description","mailNickname","groupId","group","confirmDialog","UIComponents","membersResult","ownersResult","members","owners","content","type","m","tabName","btn","targetTab","memberId","itemId","checkbox","selected","renderBulkProgressModal","executeBulkOperation","progress","modalBody","results","renderBulkResultsModal"],"mappings":"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"}