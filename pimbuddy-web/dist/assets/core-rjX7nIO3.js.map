{"version":3,"file":"core-rjX7nIO3.js","sources":["../../src/core/CacheManager.js","../../src/core/PageRouter.js","../../src/core/AccessibilityManager.js"],"sourcesContent":["/**\n * Cache Manager with TTL (Time To Live) Support\n * Intelligent caching strategy for different data types\n */\n\nexport const CACHE_KEYS = {\n    // Immutable or rarely changing data (24 hours)\n    ROLES: { key: 'roles', ttl: 24 * 60 * 60 * 1000 },\n    ROLE_DEFINITIONS: { key: 'roleDefinitions', ttl: 24 * 60 * 60 * 1000 },\n\n    // Semi-static data (5 minutes)\n    GROUPS: { key: 'groups', ttl: 5 * 60 * 1000 },\n    TEMPLATES: { key: 'templates', ttl: 5 * 60 * 1000 },\n    HEALTH_CHECK: { key: 'healthCheck', ttl: 5 * 60 * 1000 },\n    COVERAGE: { key: 'coverage', ttl: 5 * 60 * 1000 },\n\n    // Frequently changing data (2 minutes)\n    ASSIGNMENTS: { key: 'assignments', ttl: 2 * 60 * 1000 },\n    EXPIRING_ASSIGNMENTS: { key: 'expiringAssignments', ttl: 2 * 60 * 1000 },\n\n    // Real-time data (1 minute)\n    APPROVALS: { key: 'approvals', ttl: 1 * 60 * 1000 },\n    AUDIT_LOGS: { key: 'auditLogs', ttl: 1 * 60 * 1000 },\n\n    // Dashboard aggregates (30 seconds)\n    DASHBOARD_STATS: { key: 'dashboardStats', ttl: 30 * 1000 }\n};\n\nexport class CacheManager {\n    constructor() {\n        this.cache = new Map();\n        this.timestamps = new Map();\n        this.hitCount = 0;\n        this.missCount = 0;\n    }\n\n    /**\n     * Get cached value if not expired\n     * @param {string} key - Cache key\n     * @param {number} customTTL - Optional custom TTL in milliseconds\n     * @returns {*} Cached value or null if expired/missing\n     */\n    get(key, customTTL = null) {\n        if (!this.cache.has(key)) {\n            this.missCount++;\n            return null;\n        }\n\n        const age = Date.now() - this.timestamps.get(key);\n        const ttl = customTTL || this.getDefaultTTL(key);\n\n        if (age > ttl) {\n            // Expired - remove from cache\n            this.cache.delete(key);\n            this.timestamps.delete(key);\n            this.missCount++;\n            return null;\n        }\n\n        this.hitCount++;\n        return this.cache.get(key);\n    }\n\n    /**\n     * Set cached value with timestamp\n     * @param {string} key - Cache key\n     * @param {*} value - Value to cache\n     * @param {number} customTTL - Optional custom TTL in milliseconds\n     */\n    set(key, value, customTTL = null) {\n        this.cache.set(key, value);\n        this.timestamps.set(key, Date.now());\n\n        // Store custom TTL if provided\n        if (customTTL) {\n            this.cache.set(`${key}__ttl`, customTTL);\n        }\n    }\n\n    /**\n     * Check if key exists and is not expired\n     * @param {string} key - Cache key\n     * @returns {boolean}\n     */\n    has(key) {\n        return this.get(key) !== null;\n    }\n\n    /**\n     * Invalidate specific cache entry\n     * @param {string} key - Cache key to invalidate\n     */\n    invalidate(key) {\n        this.cache.delete(key);\n        this.timestamps.delete(key);\n        this.cache.delete(`${key}__ttl`);\n    }\n\n    /**\n     * Invalidate multiple cache entries by pattern\n     * @param {RegExp|string} pattern - Pattern to match keys\n     */\n    invalidatePattern(pattern) {\n        const regex = typeof pattern === 'string' ? new RegExp(pattern) : pattern;\n        const keysToDelete = [];\n\n        for (const key of this.cache.keys()) {\n            if (regex.test(key)) {\n                keysToDelete.push(key);\n            }\n        }\n\n        keysToDelete.forEach(key => this.invalidate(key));\n    }\n\n    /**\n     * Clear all cache entries\n     */\n    clear() {\n        this.cache.clear();\n        this.timestamps.clear();\n        this.hitCount = 0;\n        this.missCount = 0;\n    }\n\n    /**\n     * Clear expired entries\n     * @returns {number} Number of entries cleared\n     */\n    clearExpired() {\n        let clearedCount = 0;\n        const keysToDelete = [];\n\n        for (const [key, timestamp] of this.timestamps.entries()) {\n            const age = Date.now() - timestamp;\n            const ttl = this.getDefaultTTL(key);\n\n            if (age > ttl) {\n                keysToDelete.push(key);\n            }\n        }\n\n        keysToDelete.forEach(key => {\n            this.invalidate(key);\n            clearedCount++;\n        });\n\n        return clearedCount;\n    }\n\n    /**\n     * Get default TTL for a key\n     * @param {string} key - Cache key\n     * @returns {number} TTL in milliseconds\n     */\n    getDefaultTTL(key) {\n        // Check if custom TTL stored\n        const customTTL = this.cache.get(`${key}__ttl`);\n        if (customTTL) return customTTL;\n\n        // Look up in CACHE_KEYS\n        const cacheKeyConfig = Object.values(CACHE_KEYS).find(c => c.key === key);\n        if (cacheKeyConfig) return cacheKeyConfig.ttl;\n\n        // Default: 5 minutes\n        return 5 * 60 * 1000;\n    }\n\n    /**\n     * Get cache statistics\n     * @returns {Object} Cache stats\n     */\n    getStats() {\n        const totalRequests = this.hitCount + this.missCount;\n        const hitRate = totalRequests > 0\n            ? ((this.hitCount / totalRequests) * 100).toFixed(2)\n            : 0;\n\n        return {\n            size: this.cache.size,\n            hits: this.hitCount,\n            misses: this.missCount,\n            hitRate: `${hitRate}%`,\n            totalRequests\n        };\n    }\n\n    /**\n     * Get age of cached entry\n     * @param {string} key - Cache key\n     * @returns {number} Age in milliseconds or -1 if not found\n     */\n    getAge(key) {\n        if (!this.timestamps.has(key)) return -1;\n        return Date.now() - this.timestamps.get(key);\n    }\n\n    /**\n     * Get remaining TTL for cached entry\n     * @param {string} key - Cache key\n     * @returns {number} Remaining TTL in milliseconds or -1 if not found\n     */\n    getRemainingTTL(key) {\n        if (!this.timestamps.has(key)) return -1;\n\n        const age = this.getAge(key);\n        const ttl = this.getDefaultTTL(key);\n\n        return Math.max(0, ttl - age);\n    }\n\n    /**\n     * Warm cache with data\n     * @param {Object} data - Key-value pairs to cache\n     */\n    warmCache(data) {\n        Object.entries(data).forEach(([key, value]) => {\n            this.set(key, value);\n        });\n    }\n\n    /**\n     * Get all cache keys\n     * @returns {Array<string>}\n     */\n    getKeys() {\n        return Array.from(this.cache.keys()).filter(k => !k.endsWith('__ttl'));\n    }\n\n    /**\n     * Export cache state (for debugging)\n     * @returns {Object}\n     */\n    exportState() {\n        const state = {};\n\n        for (const key of this.getKeys()) {\n            state[key] = {\n                value: this.cache.get(key),\n                age: this.getAge(key),\n                remainingTTL: this.getRemainingTTL(key),\n                ttl: this.getDefaultTTL(key)\n            };\n        }\n\n        return state;\n    }\n}\n\n/**\n * Global cache manager instance\n */\nexport const cacheManager = new CacheManager();\n\n/**\n * Auto-cleanup expired entries every 5 minutes\n */\nsetInterval(() => {\n    const cleared = cacheManager.clearExpired();\n    if (cleared > 0) {\n        console.log(`[CacheManager] Auto-cleaned ${cleared} expired entries`);\n    }\n}, 5 * 60 * 1000);\n","/**\n * Page Router\n * Centralized navigation and page rendering logic\n */\n\nexport class PageRouter {\n    constructor() {\n        this.currentPage = 'dashboard';\n        this.pages = new Map();\n        this.pageLoaders = new Map(); // For lazy loading\n        this.loadedPages = new Map(); // Cache loaded pages\n        this.beforeNavigate = null;\n        this.afterNavigate = null;\n    }\n\n    /**\n     * Register a page (immediate loading)\n     * @param {string} name - Page name/route\n     * @param {Object} pageInstance - Page instance with render() method\n     */\n    registerPage(name, pageInstance) {\n        if (!pageInstance || typeof pageInstance.render !== 'function') {\n            throw new Error(`Page ${name} must have a render() method`);\n        }\n        this.pages.set(name, pageInstance);\n    }\n\n    /**\n     * Register a page loader (lazy loading)\n     * @param {string} name - Page name/route\n     * @param {Function} loader - Function that returns import() promise\n     */\n    registerPageLoader(name, loader) {\n        if (typeof loader !== 'function') {\n            throw new Error(`Page loader for ${name} must be a function`);\n        }\n        this.pageLoaders.set(name, loader);\n    }\n\n    /**\n     * Register multiple page loaders at once\n     * @param {Object} loaderMap - Map of page names to loader functions\n     */\n    registerPageLoaders(loaderMap) {\n        Object.entries(loaderMap).forEach(([name, loader]) => {\n            this.registerPageLoader(name, loader);\n        });\n    }\n\n    /**\n     * Register multiple pages at once\n     * @param {Object} pageMap - Map of page names to instances\n     */\n    registerPages(pageMap) {\n        Object.entries(pageMap).forEach(([name, instance]) => {\n            this.registerPage(name, instance);\n        });\n    }\n\n    /**\n     * Navigate to a page (supports both eager and lazy loaded pages)\n     * @param {string} pageName - Page to navigate to\n     * @param {Object} params - Optional parameters to pass to page\n     * @returns {Promise<boolean>} Success status\n     */\n    async navigateTo(pageName, params = {}) {\n        // Check if page exists (either registered or has loader)\n        if (!this.pages.has(pageName) && !this.pageLoaders.has(pageName)) {\n            console.error(`[PageRouter] Page not found: ${pageName}`);\n            return false;\n        }\n\n        // Before navigate hook\n        if (this.beforeNavigate) {\n            const canNavigate = await this.beforeNavigate(this.currentPage, pageName, params);\n            if (canNavigate === false) {\n                return false;\n            }\n        }\n\n        // Update navigation UI\n        this.updateNavigation(pageName);\n\n        // Update page visibility\n        this.updatePageVisibility(pageName);\n\n        // Store current page\n        const previousPage = this.currentPage;\n        this.currentPage = pageName;\n\n        try {\n            const container = document.getElementById(`page-${pageName}`);\n\n            if (!container) {\n                console.error(`[PageRouter] Container not found for page: ${pageName}`);\n                return false;\n            }\n\n            // Show loading state while loading page module\n            this.showLoadingState(container);\n\n            // Get or load page instance\n            let pageInstance = this.pages.get(pageName);\n\n            // If not registered, try lazy loading\n            if (!pageInstance && this.pageLoaders.has(pageName)) {\n                pageInstance = await this.loadPage(pageName);\n            }\n\n            if (!pageInstance) {\n                throw new Error(`Failed to load page: ${pageName}`);\n            }\n\n            // Render page\n            await pageInstance.render(container, params);\n\n            // After navigate hook\n            if (this.afterNavigate) {\n                await this.afterNavigate(previousPage, pageName, params);\n            }\n\n            return true;\n\n        } catch (error) {\n            console.error(`[PageRouter] Error rendering page ${pageName}:`, error);\n\n            // Show error state\n            this.showErrorState(pageName, error);\n\n            return false;\n        }\n    }\n\n    /**\n     * Lazy load a page module\n     * @param {string} pageName - Page name\n     * @returns {Promise<Object>} Page instance\n     */\n    async loadPage(pageName) {\n        // Return cached if already loaded\n        if (this.loadedPages.has(pageName)) {\n            return this.loadedPages.get(pageName);\n        }\n\n        const loader = this.pageLoaders.get(pageName);\n        if (!loader) {\n            throw new Error(`No loader found for page: ${pageName}`);\n        }\n\n        console.log(`[PageRouter] Lazy loading page: ${pageName}`);\n\n        // Execute loader (dynamic import)\n        const module = await loader();\n\n        // Get page instance from module\n        let pageInstance;\n\n        if (module.default) {\n            pageInstance = module.default;\n        } else if (module.render) {\n            // If module exports render directly, wrap it\n            pageInstance = { render: module.render };\n        } else {\n            throw new Error(`Page module ${pageName} must export default or render function`);\n        }\n\n        // Cache the loaded page\n        this.loadedPages.set(pageName, pageInstance);\n\n        return pageInstance;\n    }\n\n    /**\n     * Show loading state in container\n     * @param {HTMLElement} container - Container element\n     */\n    showLoadingState(container) {\n        container.innerHTML = `\n            <div class=\"page-loading\" style=\"display: flex; align-items: center; justify-content: center; min-height: 400px;\">\n                <div style=\"text-align: center;\">\n                    <div class=\"spinner\" style=\"margin: 0 auto var(--space-md);\"></div>\n                    <p style=\"color: var(--text-secondary);\">Loading page...</p>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Update navigation UI (active state)\n     * @param {string} pageName - Active page name\n     */\n    updateNavigation(pageName) {\n        // Update nav items\n        document.querySelectorAll('.nav-item').forEach(item => {\n            item.classList.remove('active');\n            if (item.dataset.page === pageName) {\n                item.classList.add('active');\n            }\n        });\n    }\n\n    /**\n     * Update page visibility\n     * @param {string} pageName - Page to show\n     */\n    updatePageVisibility(pageName) {\n        // Hide all pages\n        document.querySelectorAll('.page').forEach(page => {\n            page.classList.remove('active');\n        });\n\n        // Show target page\n        const targetPage = document.getElementById(`page-${pageName}`);\n        if (targetPage) {\n            targetPage.classList.add('active');\n        }\n    }\n\n    /**\n     * Show error state for page\n     * @param {string} pageName - Page that errored\n     * @param {Error} error - Error object\n     */\n    showErrorState(pageName, error) {\n        const container = document.getElementById(`page-${pageName}`);\n        if (!container) return;\n\n        container.innerHTML = `\n            <div class=\"error-state\" style=\"text-align: center; padding: var(--space-2xl);\">\n                <div style=\"width: 120px; height: 120px; margin: 0 auto var(--space-xl); background: var(--color-error-dim); border-radius: 50%; display: flex; align-items: center; justify-content: center;\">\n                    <i class=\"fas fa-exclamation-triangle\" style=\"font-size: 3.5rem; color: var(--color-error);\"></i>\n                </div>\n                <h2 style=\"font-family: var(--font-display); font-size: 1.8rem; font-weight: 800; margin-bottom: var(--space-md); color: var(--color-error);\">\n                    Error Loading Page\n                </h2>\n                <p style=\"color: var(--text-secondary); margin-bottom: var(--space-xl); font-family: var(--font-mono); font-size: 0.9rem;\">\n                    ${error.message || 'An unexpected error occurred'}\n                </p>\n                <button class=\"btn btn-primary\" onclick=\"app.router.navigateTo('${pageName}')\">\n                    <i class=\"fas fa-redo\"></i> Try Again\n                </button>\n                <button class=\"btn btn-secondary\" onclick=\"app.router.navigateTo('dashboard')\" style=\"margin-left: var(--space-sm);\">\n                    <i class=\"fas fa-home\"></i> Go to Dashboard\n                </button>\n            </div>\n        `;\n    }\n\n    /**\n     * Refresh current page\n     * @param {Object} params - Optional parameters\n     * @returns {Promise<boolean>}\n     */\n    async refreshCurrentPage(params = {}) {\n        return await this.navigateTo(this.currentPage, params);\n    }\n\n    /**\n     * Get current page name\n     * @returns {string}\n     */\n    getCurrentPage() {\n        return this.currentPage;\n    }\n\n    /**\n     * Check if page exists (registered or has loader)\n     * @param {string} pageName - Page name to check\n     * @returns {boolean}\n     */\n    hasPage(pageName) {\n        return this.pages.has(pageName) || this.pageLoaders.has(pageName);\n    }\n\n    /**\n     * Get registered pages (both eager and lazy)\n     * @returns {Array<string>}\n     */\n    getRegisteredPages() {\n        const eagerPages = Array.from(this.pages.keys());\n        const lazyPages = Array.from(this.pageLoaders.keys());\n        return [...new Set([...eagerPages, ...lazyPages])];\n    }\n\n    /**\n     * Clear loaded page cache\n     * @param {string} pageName - Optional: specific page to clear, or all if not specified\n     */\n    clearPageCache(pageName = null) {\n        if (pageName) {\n            this.loadedPages.delete(pageName);\n            console.log(`[PageRouter] Cleared cache for page: ${pageName}`);\n        } else {\n            this.loadedPages.clear();\n            console.log('[PageRouter] Cleared all page caches');\n        }\n    }\n\n    /**\n     * Set before navigate hook\n     * @param {Function} callback - Callback(fromPage, toPage, params) => boolean\n     */\n    setBeforeNavigate(callback) {\n        this.beforeNavigate = callback;\n    }\n\n    /**\n     * Set after navigate hook\n     * @param {Function} callback - Callback(fromPage, toPage, params)\n     */\n    setAfterNavigate(callback) {\n        this.afterNavigate = callback;\n    }\n}\n\n/**\n * Base Page class that all pages extend\n */\nexport class BasePage {\n    constructor(app) {\n        this.app = app;\n    }\n\n    /**\n     * Render page (must be implemented by subclass)\n     * @param {HTMLElement} container - Container element\n     * @param {Object} params - Optional parameters\n     */\n    async render(container, params = {}) {\n        throw new Error('render() must be implemented by subclass');\n    }\n\n    /**\n     * Show loading state\n     * @param {string} message - Loading message\n     */\n    showLoading(message = 'Loading...') {\n        if (this.app && this.app.showLoading) {\n            this.app.showLoading(message);\n        }\n    }\n\n    /**\n     * Hide loading state\n     */\n    hideLoading() {\n        if (this.app && this.app.hideLoading) {\n            this.app.hideLoading();\n        }\n    }\n\n    /**\n     * Show toast notification\n     * @param {string} message - Message\n     * @param {string} type - Type (success, error, warning, info)\n     */\n    showToast(message, type = 'info') {\n        if (this.app && this.app.showToast) {\n            this.app.showToast(message, type);\n        }\n    }\n\n    /**\n     * Show modal\n     * @param {string} content - Modal HTML content\n     */\n    showModal(content) {\n        if (this.app && this.app.showModal) {\n            this.app.showModal(content);\n        }\n    }\n\n    /**\n     * Close modal\n     */\n    closeModal() {\n        if (this.app && this.app.closeModal) {\n            this.app.closeModal();\n        }\n    }\n\n    /**\n     * Escape HTML for XSS protection\n     * @param {string} text - Text to escape\n     * @returns {string}\n     */\n    escapeHtml(text) {\n        if (this.app && this.app.escapeHtml) {\n            return this.app.escapeHtml(text);\n        }\n        // Fallback\n        const div = document.createElement('div');\n        div.textContent = text;\n        return div.innerHTML;\n    }\n\n    /**\n     * Get cached data\n     * @param {string} key - Cache key\n     * @returns {*}\n     */\n    getCached(key) {\n        return this.app?.cacheManager?.get(key) || null;\n    }\n\n    /**\n     * Set cached data\n     * @param {string} key - Cache key\n     * @param {*} value - Value to cache\n     */\n    setCached(key, value) {\n        this.app?.cacheManager?.set(key, value);\n    }\n\n    /**\n     * Check if user is connected\n     * @returns {boolean}\n     */\n    isConnected() {\n        return this.app?.isConnected || false;\n    }\n}\n","/**\n * Accessibility Manager\n * Handles focus management, keyboard navigation, and screen reader support\n */\n\nexport class AccessibilityManager {\n    constructor() {\n        this.lastFocusedElement = null;\n        this.modalStack = [];\n        this.skipLinksAdded = false;\n    }\n\n    /**\n     * Initialize accessibility features\n     */\n    initialize() {\n        this.addSkipLinks();\n        this.setupKeyboardNavigation();\n        this.setupFocusManagement();\n        this.enhanceModals();\n        this.setupLiveRegion();\n\n        console.log('AccessibilityManager initialized');\n    }\n\n    /**\n     * Add skip links for keyboard navigation\n     */\n    addSkipLinks() {\n        if (this.skipLinksAdded) return;\n\n        const skipLinks = document.createElement('div');\n        skipLinks.className = 'skip-links';\n        skipLinks.setAttribute('role', 'navigation');\n        skipLinks.setAttribute('aria-label', 'Skip links');\n\n        skipLinks.innerHTML = `\n            <a href=\"#main-content\" class=\"skip-link\">Skip to main content</a>\n            <a href=\"#navigation\" class=\"skip-link\">Skip to navigation</a>\n        `;\n\n        document.body.insertBefore(skipLinks, document.body.firstChild);\n        this.skipLinksAdded = true;\n\n        // Add CSS for skip links (visible on focus)\n        this.addSkipLinkStyles();\n    }\n\n    /**\n     * Add CSS for skip links\n     */\n    addSkipLinkStyles() {\n        const style = document.createElement('style');\n        style.textContent = `\n            .skip-links {\n                position: absolute;\n                top: -1000px;\n                left: -1000px;\n                width: 1px;\n                height: 1px;\n                overflow: hidden;\n            }\n\n            .skip-link:focus {\n                position: fixed;\n                top: 10px;\n                left: 10px;\n                width: auto;\n                height: auto;\n                padding: 0.75rem 1.5rem;\n                background: var(--accent-primary);\n                color: var(--bg-primary);\n                font-family: var(--font-display);\n                font-weight: 700;\n                text-decoration: none;\n                border-radius: var(--radius-md);\n                z-index: 10000;\n                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n            }\n\n            .skip-link:focus:hover {\n                background: var(--accent-primary-bright);\n            }\n\n            /* Focus visible styles for better keyboard navigation */\n            *:focus-visible {\n                outline: 2px solid var(--accent-primary);\n                outline-offset: 2px;\n            }\n\n            /* Remove default focus for mouse users */\n            *:focus:not(:focus-visible) {\n                outline: none;\n            }\n        `;\n        document.head.appendChild(style);\n    }\n\n    /**\n     * Setup keyboard navigation\n     */\n    setupKeyboardNavigation() {\n        // Enhanced keyboard shortcuts with announcements\n        document.addEventListener('keydown', (e) => {\n            // Alt+N for navigation menu\n            if (e.altKey && e.key === 'n') {\n                e.preventDefault();\n                this.focusNavigation();\n                this.announce('Navigation menu focused');\n            }\n\n            // Alt+M for main content\n            if (e.altKey && e.key === 'm') {\n                e.preventDefault();\n                this.focusMainContent();\n                this.announce('Main content focused');\n            }\n\n            // Alt+S for search (if search exists)\n            if (e.altKey && e.key === 's') {\n                e.preventDefault();\n                const search = document.querySelector('[role=\"search\"] input, #group-search, #role-search');\n                if (search) {\n                    search.focus();\n                    this.announce('Search focused');\n                }\n            }\n        });\n\n        // Tab trap in modals (handled in enhanceModals)\n    }\n\n    /**\n     * Setup focus management\n     */\n    setupFocusManagement() {\n        // Restore focus when navigating back\n        window.addEventListener('popstate', () => {\n            // Focus main content after navigation\n            requestAnimationFrame(() => {\n                this.focusMainContent();\n            });\n        });\n\n        // Monitor focus and provide helpful feedback\n        document.addEventListener('focus', (e) => {\n            // Announce buttons on focus for screen readers\n            if (e.target.matches('button:not([aria-label]):not([title])')) {\n                const text = e.target.textContent.trim();\n                if (text) {\n                    e.target.setAttribute('aria-label', text);\n                }\n            }\n        }, true);\n    }\n\n    /**\n     * Enhance modals with accessibility features\n     */\n    enhanceModals() {\n        // Observe modal container for changes\n        const modalContainer = document.getElementById('modal-container');\n        if (!modalContainer) return;\n\n        const observer = new MutationObserver((mutations) => {\n            mutations.forEach((mutation) => {\n                if (mutation.attributeName === 'class') {\n                    const isVisible = !modalContainer.classList.contains('hidden');\n\n                    if (isVisible) {\n                        this.handleModalOpen(modalContainer);\n                    } else {\n                        this.handleModalClose();\n                    }\n                }\n            });\n        });\n\n        observer.observe(modalContainer, { attributes: true });\n\n        // Add aria attributes to modal\n        modalContainer.setAttribute('role', 'dialog');\n        modalContainer.setAttribute('aria-modal', 'true');\n        modalContainer.setAttribute('aria-hidden', 'true');\n    }\n\n    /**\n     * Handle modal open\n     * @param {HTMLElement} modal - Modal element\n     */\n    handleModalOpen(modal) {\n        // Save current focus\n        this.lastFocusedElement = document.activeElement;\n        this.modalStack.push(this.lastFocusedElement);\n\n        // Update aria-hidden\n        modal.setAttribute('aria-hidden', 'false');\n\n        // Find modal title for aria-labelledby\n        const modalContent = modal.querySelector('#modal-content');\n        const title = modalContent?.querySelector('h2, h3, .modal-title');\n        if (title && !title.id) {\n            title.id = `modal-title-${Date.now()}`;\n        }\n        if (title) {\n            modal.setAttribute('aria-labelledby', title.id);\n        }\n\n        // Focus first focusable element in modal\n        requestAnimationFrame(() => {\n            const firstFocusable = this.getFocusableElements(modalContent)[0];\n            if (firstFocusable) {\n                firstFocusable.focus();\n            }\n        });\n\n        // Setup tab trapping\n        this.setupTabTrap(modal);\n\n        // Announce modal opened\n        this.announce('Dialog opened');\n    }\n\n    /**\n     * Handle modal close\n     */\n    handleModalClose() {\n        const modal = document.getElementById('modal-container');\n        modal.setAttribute('aria-hidden', 'true');\n\n        // Restore focus to last focused element\n        const focusElement = this.modalStack.pop();\n        if (focusElement && typeof focusElement.focus === 'function') {\n            // Use setTimeout to avoid focus issues\n            setTimeout(() => {\n                try {\n                    focusElement.focus();\n                } catch (e) {\n                    // If focus fails, focus main content\n                    this.focusMainContent();\n                }\n            }, 100);\n        }\n\n        // Announce modal closed\n        this.announce('Dialog closed');\n    }\n\n    /**\n     * Setup tab trapping in modal\n     * @param {HTMLElement} modal - Modal element\n     */\n    setupTabTrap(modal) {\n        const modalContent = modal.querySelector('#modal-content');\n        if (!modalContent) return;\n\n        const handleTabKey = (e) => {\n            if (e.key !== 'Tab') return;\n\n            const focusableElements = this.getFocusableElements(modalContent);\n            const firstElement = focusableElements[0];\n            const lastElement = focusableElements[focusableElements.length - 1];\n\n            // If no focusable elements, prevent tab\n            if (focusableElements.length === 0) {\n                e.preventDefault();\n                return;\n            }\n\n            // Shift+Tab on first element -> focus last\n            if (e.shiftKey && document.activeElement === firstElement) {\n                e.preventDefault();\n                lastElement.focus();\n            }\n            // Tab on last element -> focus first\n            else if (!e.shiftKey && document.activeElement === lastElement) {\n                e.preventDefault();\n                firstElement.focus();\n            }\n        };\n\n        // Remove previous listener if exists\n        modal.removeEventListener('keydown', handleTabKey);\n        modal.addEventListener('keydown', handleTabKey);\n    }\n\n    /**\n     * Get all focusable elements in container\n     * @param {HTMLElement} container - Container element\n     * @returns {Array} Array of focusable elements\n     */\n    getFocusableElements(container) {\n        if (!container) return [];\n\n        const selector = `\n            a[href]:not([disabled]),\n            button:not([disabled]),\n            textarea:not([disabled]),\n            input:not([type=\"hidden\"]):not([disabled]),\n            select:not([disabled]),\n            [tabindex]:not([tabindex=\"-1\"]):not([disabled])\n        `;\n\n        return Array.from(container.querySelectorAll(selector))\n            .filter(el => {\n                // Filter out invisible elements\n                return el.offsetParent !== null &&\n                       window.getComputedStyle(el).visibility !== 'hidden';\n            });\n    }\n\n    /**\n     * Focus navigation menu\n     */\n    focusNavigation() {\n        const nav = document.querySelector('.sidebar, [role=\"navigation\"]');\n        if (nav) {\n            const firstNavItem = nav.querySelector('.nav-item, a');\n            if (firstNavItem) {\n                firstNavItem.focus();\n            }\n        }\n    }\n\n    /**\n     * Focus main content\n     */\n    focusMainContent() {\n        const main = document.getElementById('main-content') || document.querySelector('main, .content-wrapper');\n        if (main) {\n            // Make main focusable if it isn't\n            if (!main.hasAttribute('tabindex')) {\n                main.setAttribute('tabindex', '-1');\n            }\n            main.focus();\n            // Remove tabindex after focus to not interfere with normal tab flow\n            setTimeout(() => {\n                main.removeAttribute('tabindex');\n            }, 100);\n        }\n    }\n\n    /**\n     * Setup live region for screen reader announcements\n     */\n    setupLiveRegion() {\n        let liveRegion = document.getElementById('a11y-live-region');\n\n        if (!liveRegion) {\n            liveRegion = document.createElement('div');\n            liveRegion.id = 'a11y-live-region';\n            liveRegion.setAttribute('role', 'status');\n            liveRegion.setAttribute('aria-live', 'polite');\n            liveRegion.setAttribute('aria-atomic', 'true');\n            liveRegion.className = 'sr-only';\n\n            // Add CSS for screen-reader-only content\n            const style = document.createElement('style');\n            style.textContent = `\n                .sr-only {\n                    position: absolute;\n                    width: 1px;\n                    height: 1px;\n                    padding: 0;\n                    margin: -1px;\n                    overflow: hidden;\n                    clip: rect(0, 0, 0, 0);\n                    white-space: nowrap;\n                    border: 0;\n                }\n            `;\n            document.head.appendChild(style);\n\n            document.body.appendChild(liveRegion);\n        }\n\n        this.liveRegion = liveRegion;\n    }\n\n    /**\n     * Announce message to screen readers\n     * @param {string} message - Message to announce\n     * @param {string} priority - 'polite' or 'assertive'\n     */\n    announce(message, priority = 'polite') {\n        if (!this.liveRegion) {\n            this.setupLiveRegion();\n        }\n\n        // Update aria-live attribute\n        this.liveRegion.setAttribute('aria-live', priority);\n\n        // Clear and set message\n        this.liveRegion.textContent = '';\n\n        // Small delay to ensure screen readers pick up the change\n        setTimeout(() => {\n            this.liveRegion.textContent = message;\n        }, 100);\n\n        // Clear after announcement\n        setTimeout(() => {\n            this.liveRegion.textContent = '';\n        }, 1000);\n    }\n\n    /**\n     * Enhance form accessibility\n     * @param {HTMLFormElement} form - Form element\n     */\n    enhanceForm(form) {\n        if (!form) return;\n\n        // Add labels to inputs without labels\n        const inputs = form.querySelectorAll('input, select, textarea');\n        inputs.forEach(input => {\n            if (!input.id) {\n                input.id = `input-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n            }\n\n            // Find associated label\n            let label = form.querySelector(`label[for=\"${input.id}\"]`);\n\n            // If no label, check if input is inside a label\n            if (!label) {\n                label = input.closest('label');\n            }\n\n            // If still no label, create one from placeholder or name\n            if (!label && (input.placeholder || input.name)) {\n                const labelText = input.placeholder || input.name;\n                input.setAttribute('aria-label', labelText);\n            }\n\n            // Add aria-required for required fields\n            if (input.hasAttribute('required') && !input.hasAttribute('aria-required')) {\n                input.setAttribute('aria-required', 'true');\n            }\n\n            // Add aria-invalid for fields with errors\n            if (input.classList.contains('error') || input.classList.contains('invalid')) {\n                input.setAttribute('aria-invalid', 'true');\n            }\n        });\n\n        // Announce form errors\n        const errorMessages = form.querySelectorAll('.error-message, .field-error');\n        if (errorMessages.length > 0) {\n            const errors = Array.from(errorMessages).map(el => el.textContent).join(', ');\n            this.announce(`Form has ${errorMessages.length} error${errorMessages.length > 1 ? 's' : ''}: ${errors}`, 'assertive');\n        }\n    }\n\n    /**\n     * Enhance table accessibility\n     * @param {HTMLTableElement} table - Table element\n     */\n    enhanceTable(table) {\n        if (!table) return;\n\n        // Add role if not present\n        if (!table.hasAttribute('role')) {\n            table.setAttribute('role', 'table');\n        }\n\n        // Add caption if not present\n        if (!table.querySelector('caption')) {\n            const caption = document.createElement('caption');\n            caption.className = 'sr-only';\n            caption.textContent = table.getAttribute('aria-label') || 'Data table';\n            table.insertBefore(caption, table.firstChild);\n        }\n\n        // Enhance thead\n        const thead = table.querySelector('thead');\n        if (thead) {\n            thead.setAttribute('role', 'rowgroup');\n            thead.querySelectorAll('tr').forEach(tr => {\n                tr.setAttribute('role', 'row');\n            });\n            thead.querySelectorAll('th').forEach(th => {\n                th.setAttribute('role', 'columnheader');\n                if (!th.hasAttribute('scope')) {\n                    th.setAttribute('scope', 'col');\n                }\n            });\n        }\n\n        // Enhance tbody\n        const tbody = table.querySelector('tbody');\n        if (tbody) {\n            tbody.setAttribute('role', 'rowgroup');\n            tbody.querySelectorAll('tr').forEach(tr => {\n                tr.setAttribute('role', 'row');\n            });\n            tbody.querySelectorAll('td').forEach(td => {\n                td.setAttribute('role', 'cell');\n            });\n        }\n\n        // Add sortable attributes to sortable columns\n        table.querySelectorAll('th.sortable').forEach(th => {\n            if (!th.hasAttribute('aria-sort')) {\n                th.setAttribute('aria-sort', 'none');\n            }\n        });\n    }\n\n    /**\n     * Announce page change\n     * @param {string} pageName - Name of the page\n     */\n    announcePageChange(pageName) {\n        const formattedName = pageName\n            .split('-')\n            .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n            .join(' ');\n\n        this.announce(`Navigated to ${formattedName} page`, 'polite');\n    }\n\n    /**\n     * Announce loading state\n     * @param {boolean} isLoading - Whether loading\n     * @param {string} message - Loading message\n     */\n    announceLoading(isLoading, message = '') {\n        if (isLoading) {\n            this.announce(`Loading${message ? ': ' + message : '...'}`, 'polite');\n        } else {\n            this.announce('Loading complete', 'polite');\n        }\n    }\n}\n\n// Export singleton instance\nexport const accessibilityManager = new AccessibilityManager();\n"],"names":["CACHE_KEYS","CacheManager","key","customTTL","age","ttl","value","pattern","regex","keysToDelete","clearedCount","timestamp","cacheKeyConfig","c","totalRequests","hitRate","data","k","state","cacheManager","cleared","PageRouter","name","pageInstance","loader","loaderMap","pageMap","instance","pageName","params","previousPage","container","error","module","item","page","targetPage","eagerPages","lazyPages","callback","BasePage","app","message","type","content","text","div","AccessibilityManager","skipLinks","style","search","modalContainer","mutations","mutation","modal","modalContent","title","firstFocusable","focusElement","handleTabKey","e","focusableElements","firstElement","lastElement","el","nav","firstNavItem","main","liveRegion","priority","form","input","label","labelText","errorMessages","errors","table","caption","thead","tr","th","tbody","td","formattedName","word","isLoading","accessibilityManager"],"mappings":"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"}