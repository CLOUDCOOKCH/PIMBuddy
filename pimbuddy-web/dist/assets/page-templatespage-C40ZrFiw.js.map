{"version":3,"file":"page-templatespage-C40ZrFiw.js","sources":["../../src/pages/TemplatesPage.js"],"sourcesContent":["/**\n * Templates Page\n * Policy templates for consistent PIM configuration\n */\n\nimport { BasePage } from '../core/PageRouter.js';\nimport { templateService } from '../services/templateService.js';\n\nexport class TemplatesPage extends BasePage {\n    constructor(app) {\n        super(app);\n    }\n\n    /**\n     * Render Templates page\n     * @param {HTMLElement} container - Page container\n     * @param {Object} params - Optional parameters\n     */\n    async render(container, params = {}) {\n        const templates = templateService.getAllTemplates();\n\n        container.innerHTML = `\n            <h1 class=\"page-header\">Policy Templates</h1>\n            <p class=\"page-description\">Apply predefined policy configurations to your PIM groups. Templates help ensure consistent security settings across your organization.</p>\n\n            <div class=\"templates-grid\">\n                ${Object.values(templates).map(t => `\n                    <div class=\"card template-card\">\n                        <div class=\"template-icon ${t.color || 'primary'}\">\n                            <i class=\"fas ${t.icon}\"></i>\n                        </div>\n                        <h3>${this.escapeHtml(t.name)}</h3>\n                        <p class=\"template-description\">${this.escapeHtml(t.description)}</p>\n                        <div class=\"template-settings\">\n                            <div class=\"template-setting\">\n                                <span class=\"setting-label\">Max Duration:</span>\n                                <span class=\"setting-value\">${t.settings.activation.maximumDurationHours}h</span>\n                            </div>\n                            <div class=\"template-setting\">\n                                <span class=\"setting-label\">MFA:</span>\n                                <span class=\"setting-value ${t.settings.activation.requireMfa ? 'enabled' : 'disabled'}\">${t.settings.activation.requireMfa ? 'Required' : 'Optional'}</span>\n                            </div>\n                            <div class=\"template-setting\">\n                                <span class=\"setting-label\">Approval:</span>\n                                <span class=\"setting-value ${t.settings.activation.requireApproval ? 'enabled' : 'disabled'}\">${t.settings.activation.requireApproval ? 'Required' : 'Optional'}</span>\n                            </div>\n                            <div class=\"template-setting\">\n                                <span class=\"setting-label\">Justification:</span>\n                                <span class=\"setting-value ${t.settings.activation.requireJustification ? 'enabled' : 'disabled'}\">${t.settings.activation.requireJustification ? 'Required' : 'Optional'}</span>\n                            </div>\n                        </div>\n                        <div class=\"template-actions\">\n                            <button class=\"btn btn-secondary btn-sm\" onclick=\"app.pages.templates.viewDetails('${t.id}')\" ${!this.isConnected() ? 'disabled' : ''} aria-label=\"View template details for ${this.escapeHtml(t.name)}\">\n                                <i class=\"fas fa-eye\"></i> Details\n                            </button>\n                            <button class=\"btn btn-primary btn-sm\" onclick=\"app.pages.templates.applyTemplate('${t.id}')\" ${!this.isConnected() ? 'disabled' : ''} aria-label=\"Apply template ${this.escapeHtml(t.name)}\">\n                                <i class=\"fas fa-play\"></i> Apply\n                            </button>\n                        </div>\n                    </div>\n                `).join('')}\n            </div>\n        `;\n    }\n\n    /**\n     * View template details\n     * @param {string} templateId - Template ID\n     */\n    viewDetails(templateId) {\n        const template = templateService.getTemplate(templateId);\n        if (!template) {\n            this.showToast('Template not found', 'error');\n            return;\n        }\n\n        const settings = template.settings;\n        const html = `\n            <h2><i class=\"fas ${template.icon}\"></i> ${this.escapeHtml(template.name)}</h2>\n            <p>${this.escapeHtml(template.description)}</p>\n\n            <div class=\"template-detail-sections\">\n                <div class=\"detail-section\">\n                    <h3>Activation Settings</h3>\n                    <table class=\"settings-table\">\n                        <tr><td>Maximum Duration</td><td>${settings.activation.maximumDurationHours} hours</td></tr>\n                        <tr><td>Require MFA</td><td>${settings.activation.requireMfa ? '<span class=\"badge success\">Yes</span>' : '<span class=\"badge\">No</span>'}</td></tr>\n                        <tr><td>Require Justification</td><td>${settings.activation.requireJustification ? '<span class=\"badge success\">Yes</span>' : '<span class=\"badge\">No</span>'}</td></tr>\n                        <tr><td>Require Ticket Info</td><td>${settings.activation.requireTicketInfo ? '<span class=\"badge success\">Yes</span>' : '<span class=\"badge\">No</span>'}</td></tr>\n                        <tr><td>Require Approval</td><td>${settings.activation.requireApproval ? '<span class=\"badge warning\">Yes</span>' : '<span class=\"badge\">No</span>'}</td></tr>\n                    </table>\n                </div>\n\n                <div class=\"detail-section\">\n                    <h3>Eligible Assignment Settings</h3>\n                    <table class=\"settings-table\">\n                        <tr><td>Allow Permanent</td><td>${settings.eligibleAssignment.allowPermanent ? '<span class=\"badge\">Yes</span>' : '<span class=\"badge warning\">No</span>'}</td></tr>\n                        <tr><td>Maximum Duration</td><td>${settings.eligibleAssignment.maximumDurationDays} days</td></tr>\n                    </table>\n                </div>\n\n                <div class=\"detail-section\">\n                    <h3>Active Assignment Settings</h3>\n                    <table class=\"settings-table\">\n                        <tr><td>Allow Permanent</td><td>${settings.activeAssignment.allowPermanent ? '<span class=\"badge\">Yes</span>' : '<span class=\"badge warning\">No</span>'}</td></tr>\n                        <tr><td>Maximum Duration</td><td>${settings.activeAssignment.maximumDurationDays} days</td></tr>\n                    </table>\n                </div>\n            </div>\n\n            <div class=\"modal-actions\">\n                <button type=\"button\" class=\"btn btn-secondary\" onclick=\"app.closeModal()\">Close</button>\n                <button type=\"button\" class=\"btn btn-primary\" onclick=\"app.closeModal(); app.pages.templates.applyTemplate('${templateId}')\">\n                    <i class=\"fas fa-play\"></i> Apply Template\n                </button>\n            </div>\n        `;\n\n        this.showModal(html);\n    }\n\n    /**\n     * Apply template (simplified - shows info message)\n     * @param {string} templateId - Template ID\n     */\n    async applyTemplate(templateId) {\n        const template = templateService.getTemplate(templateId);\n        if (!template) {\n            this.showToast('Template not found', 'error');\n            return;\n        }\n\n        // For now, show a message that template application is a complex feature\n        // In a full implementation, this would show a group selector modal and apply the policy\n        this.showToast(`Template application for \"${template.name}\" - Full implementation pending`, 'info');\n\n        // TODO: Implement full template application with group selection\n        // See app.js lines 3332-3450 for reference implementation\n    }\n\n    /**\n     * Refresh page data\n     */\n    async refreshPage() {\n        await this.app.router.refreshCurrentPage();\n    }\n}\n"],"names":["TemplatesPage","BasePage","app","container","params","templates","templateService","templateId","template","settings","html"],"mappings":"kFAQO,MAAMA,UAAsBC,CAAS,CACxC,YAAYC,EAAK,CACb,MAAMA,CAAG,CACb,CAOA,MAAM,OAAOC,EAAWC,EAAS,GAAI,CACjC,MAAMC,EAAYC,EAAgB,gBAAe,EAEjDH,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKZ,OAAO,OAAOE,CAAS,EAAE,IAAI,GAAK;AAAA;AAAA,oDAEA,EAAE,OAAS,SAAS;AAAA,4CAC5B,EAAE,IAAI;AAAA;AAAA,8BAEpB,KAAK,WAAW,EAAE,IAAI,CAAC;AAAA,0DACK,KAAK,WAAW,EAAE,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA,8DAI1B,EAAE,SAAS,WAAW,oBAAoB;AAAA;AAAA;AAAA;AAAA,6DAI3C,EAAE,SAAS,WAAW,WAAa,UAAY,UAAU,KAAK,EAAE,SAAS,WAAW,WAAa,WAAa,UAAU;AAAA;AAAA;AAAA;AAAA,6DAIxH,EAAE,SAAS,WAAW,gBAAkB,UAAY,UAAU,KAAK,EAAE,SAAS,WAAW,gBAAkB,WAAa,UAAU;AAAA;AAAA;AAAA;AAAA,6DAIlI,EAAE,SAAS,WAAW,qBAAuB,UAAY,UAAU,KAAK,EAAE,SAAS,WAAW,qBAAuB,WAAa,UAAU;AAAA;AAAA;AAAA;AAAA,iHAIxF,EAAE,EAAE,OAAQ,KAAK,YAAW,EAAkB,GAAb,UAAe,0CAA0C,KAAK,WAAW,EAAE,IAAI,CAAC;AAAA;AAAA;AAAA,iHAGjH,EAAE,EAAE,OAAQ,KAAK,YAAW,EAAkB,GAAb,UAAe,+BAA+B,KAAK,WAAW,EAAE,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKtM,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,SAGvB,CAMA,YAAYE,EAAY,CACpB,MAAMC,EAAWF,EAAgB,YAAYC,CAAU,EACvD,GAAI,CAACC,EAAU,CACX,KAAK,UAAU,qBAAsB,OAAO,EAC5C,MACJ,CAEA,MAAMC,EAAWD,EAAS,SACpBE,EAAO;AAAA,gCACWF,EAAS,IAAI,UAAU,KAAK,WAAWA,EAAS,IAAI,CAAC;AAAA,iBACpE,KAAK,WAAWA,EAAS,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAMKC,EAAS,WAAW,oBAAoB;AAAA,sDAC7CA,EAAS,WAAW,WAAa,yCAA2C,+BAA+B;AAAA,gEACjGA,EAAS,WAAW,qBAAuB,yCAA2C,+BAA+B;AAAA,8DACvHA,EAAS,WAAW,kBAAoB,yCAA2C,+BAA+B;AAAA,2DACrHA,EAAS,WAAW,gBAAkB,yCAA2C,+BAA+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0DAOjHA,EAAS,mBAAmB,eAAiB,iCAAmC,uCAAuC;AAAA,2DACtHA,EAAS,mBAAmB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0DAOhDA,EAAS,iBAAiB,eAAiB,iCAAmC,uCAAuC;AAAA,2DACpHA,EAAS,iBAAiB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8HAOsBF,CAAU;AAAA;AAAA;AAAA;AAAA,UAMhI,KAAK,UAAUG,CAAI,CACvB,CAMA,MAAM,cAAcH,EAAY,CAC5B,MAAMC,EAAWF,EAAgB,YAAYC,CAAU,EACvD,GAAI,CAACC,EAAU,CACX,KAAK,UAAU,qBAAsB,OAAO,EAC5C,MACJ,CAIA,KAAK,UAAU,6BAA6BA,EAAS,IAAI,kCAAmC,MAAM,CAItG,CAKA,MAAM,aAAc,CAChB,MAAM,KAAK,IAAI,OAAO,mBAAkB,CAC5C,CACJ"}