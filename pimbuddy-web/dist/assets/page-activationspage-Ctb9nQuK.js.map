{"version":3,"file":"page-activationspage-Ctb9nQuK.js","sources":["../../src/pages/ActivationsPage.js"],"sourcesContent":["/**\n * Activations Page\n * Manage PIM role activations - view eligible roles, activate, and deactivate\n */\n\nimport { BasePage } from '../core/PageRouter.js';\nimport { graphService } from '../services/graphService.js';\nimport { CACHE_KEYS } from '../core/CacheManager.js';\nimport UIComponents from '../utils/uiComponents.js';\n\nexport class ActivationsPage extends BasePage {\n    constructor(app) {\n        super(app);\n        this.currentTab = 'eligible';\n    }\n\n    /**\n     * Render Activations page\n     * @param {HTMLElement} container - Page container\n     * @param {Object} params - Optional parameters\n     */\n    async render(container, params = {}) {\n        let eligibleRoles = [];\n        let activeRoles = [];\n\n        if (this.isConnected()) {\n            this.showLoading('Loading role assignments...');\n\n            // Fetch eligible and active role assignments in parallel\n            const [eligibleResult, activeResult] = await Promise.all([\n                graphService.getMyEligibleRoles(),\n                graphService.getMyActiveRoles()\n            ]);\n\n            if (eligibleResult.success) {\n                eligibleRoles = eligibleResult.roles;\n            } else {\n                this.showToast(`Failed to load eligible roles: ${eligibleResult.error}`, 'error');\n            }\n\n            if (activeResult.success) {\n                activeRoles = activeResult.roles;\n            } else {\n                this.showToast(`Failed to load active roles: ${activeResult.error}`, 'error');\n            }\n\n            this.hideLoading();\n        }\n\n        container.innerHTML = `\n            <div class=\"page-header-row\">\n                <h1 class=\"page-header\">\n                    <i class=\"fas fa-user-clock\"></i> My Role Activations\n                </h1>\n            </div>\n\n            <div class=\"info-banner\">\n                <i class=\"fas fa-info-circle\"></i>\n                <div>\n                    <strong>Just-in-Time Access</strong>\n                    <p>Activate eligible roles when needed. Activations are time-limited and require justification.</p>\n                </div>\n            </div>\n\n            <div class=\"tabs\">\n                <button class=\"tab-btn ${this.currentTab === 'eligible' ? 'active' : ''}\"\n                        onclick=\"app.pages.activations.switchTab('eligible')\">\n                    <i class=\"fas fa-unlock\"></i> Eligible Roles (${eligibleRoles.length})\n                </button>\n                <button class=\"tab-btn ${this.currentTab === 'active' ? 'active' : ''}\"\n                        onclick=\"app.pages.activations.switchTab('active')\">\n                    <i class=\"fas fa-check-circle\"></i> Active Roles (${activeRoles.length})\n                </button>\n            </div>\n\n            <!-- Eligible Roles Tab -->\n            <div id=\"tab-eligible\" class=\"tab-content ${this.currentTab === 'eligible' ? 'active' : ''}\"\n                 style=\"display: ${this.currentTab === 'eligible' ? 'block' : 'none'};\">\n                ${this.renderEligibleRoles(eligibleRoles)}\n            </div>\n\n            <!-- Active Roles Tab -->\n            <div id=\"tab-active\" class=\"tab-content ${this.currentTab === 'active' ? 'active' : ''}\"\n                 style=\"display: ${this.currentTab === 'active' ? 'block' : 'none'};\">\n                ${this.renderActiveRoles(activeRoles)}\n            </div>\n        `;\n    }\n\n    /**\n     * Render eligible roles list\n     * @param {Array} roles - Eligible roles\n     * @returns {string} HTML\n     */\n    renderEligibleRoles(roles) {\n        if (!this.isConnected()) {\n            return `<div class=\"empty-state\"><i class=\"fas fa-plug\"></i><p>Connect to view your eligible roles</p></div>`;\n        }\n\n        if (roles.length === 0) {\n            return `<div class=\"empty-state\"><i class=\"fas fa-inbox\"></i><p>You have no eligible role assignments</p></div>`;\n        }\n\n        return `\n            <div class=\"card\">\n                <div class=\"card-header\">\n                    <h3>Roles You Can Activate</h3>\n                    <p class=\"card-subtitle\">Click \"Activate\" to request time-limited access to a role</p>\n                </div>\n\n                <div class=\"roles-grid\">\n                    ${roles.map(role => `\n                        <div class=\"role-card eligible-role\">\n                            <div class=\"role-card-header\">\n                                <div class=\"role-icon ${this.getPrivilegeClass(role.privilegeLevel)}\">\n                                    <i class=\"fas ${this.getPrivilegeIcon(role.privilegeLevel)}\"></i>\n                                </div>\n                                <div class=\"role-info\">\n                                    <h4>${this.escapeHtml(role.displayName)}</h4>\n                                    <p class=\"role-description\">${this.escapeHtml(role.description || 'No description')}</p>\n                                </div>\n                            </div>\n\n                            <div class=\"role-card-body\">\n                                <div class=\"role-meta\">\n                                    <div class=\"meta-item\">\n                                        <i class=\"fas fa-shield-alt\"></i>\n                                        <span>${this.formatPrivilegeLevel(role.privilegeLevel)}</span>\n                                    </div>\n                                    <div class=\"meta-item\">\n                                        <i class=\"fas fa-clock\"></i>\n                                        <span>Max: ${role.maxDuration || '8'} hours</span>\n                                    </div>\n                                    ${role.requiresApproval ? `\n                                        <div class=\"meta-item warning\">\n                                            <i class=\"fas fa-user-check\"></i>\n                                            <span>Requires Approval</span>\n                                        </div>\n                                    ` : ''}\n                                    ${role.requiresMfa ? `\n                                        <div class=\"meta-item\">\n                                            <i class=\"fas fa-key\"></i>\n                                            <span>Requires MFA</span>\n                                        </div>\n                                    ` : ''}\n                                </div>\n\n                                ${role.assignmentEnd ? `\n                                    <div class=\"assignment-expires\">\n                                        <i class=\"fas fa-hourglass-end\"></i>\n                                        <span>Eligibility expires: ${new Date(role.assignmentEnd).toLocaleDateString()}</span>\n                                    </div>\n                                ` : ''}\n                            </div>\n\n                            <div class=\"role-card-footer\">\n                                <button class=\"btn btn-primary btn-block\"\n                                        onclick=\"app.pages.activations.showActivationForm('${role.roleId}', '${this.escapeHtml(role.displayName)}', '${role.privilegeLevel}')\">\n                                    <i class=\"fas fa-play-circle\"></i> Activate Role\n                                </button>\n                            </div>\n                        </div>\n                    `).join('')}\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Render active roles list\n     * @param {Array} roles - Active roles\n     * @returns {string} HTML\n     */\n    renderActiveRoles(roles) {\n        if (!this.isConnected()) {\n            return `<div class=\"empty-state\"><i class=\"fas fa-plug\"></i><p>Connect to view your active roles</p></div>`;\n        }\n\n        if (roles.length === 0) {\n            return `<div class=\"empty-state\"><i class=\"fas fa-check-circle\"></i><p>You have no active role assignments</p></div>`;\n        }\n\n        return `\n            <div class=\"card\">\n                <div class=\"card-header\">\n                    <h3>Currently Active Roles</h3>\n                    <p class=\"card-subtitle\">These roles are currently active and will automatically expire</p>\n                </div>\n\n                <div class=\"roles-grid\">\n                    ${roles.map(role => {\n                        const timeRemaining = this.calculateTimeRemaining(role.endDateTime);\n                        const isExpiringSoon = timeRemaining.hours < 1;\n\n                        return `\n                            <div class=\"role-card active-role ${isExpiringSoon ? 'expiring-soon' : ''}\">\n                                <div class=\"role-card-header\">\n                                    <div class=\"role-icon active\">\n                                        <i class=\"fas fa-check-circle\"></i>\n                                    </div>\n                                    <div class=\"role-info\">\n                                        <h4>${this.escapeHtml(role.displayName)}</h4>\n                                        <p class=\"role-description\">${this.escapeHtml(role.description || 'No description')}</p>\n                                    </div>\n                                </div>\n\n                                <div class=\"role-card-body\">\n                                    <div class=\"activation-timeline\">\n                                        <div class=\"timeline-item\">\n                                            <i class=\"fas fa-play-circle\"></i>\n                                            <div>\n                                                <strong>Activated</strong>\n                                                <span>${new Date(role.startDateTime).toLocaleString()}</span>\n                                            </div>\n                                        </div>\n                                        <div class=\"timeline-item ${isExpiringSoon ? 'warning' : ''}\">\n                                            <i class=\"fas fa-stop-circle\"></i>\n                                            <div>\n                                                <strong>Expires ${isExpiringSoon ? '(Soon)' : ''}</strong>\n                                                <span>${new Date(role.endDateTime).toLocaleString()}</span>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class=\"time-remaining ${isExpiringSoon ? 'urgent' : ''}\">\n                                        <i class=\"fas fa-hourglass-${isExpiringSoon ? 'end' : 'half'}\"></i>\n                                        <span>\n                                            <strong>Time Remaining:</strong>\n                                            ${this.formatTimeRemaining(timeRemaining)}\n                                        </span>\n                                    </div>\n\n                                    ${role.justification ? `\n                                        <div class=\"activation-justification\">\n                                            <strong>Justification:</strong>\n                                            <p>${this.escapeHtml(role.justification)}</p>\n                                        </div>\n                                    ` : ''}\n\n                                    ${role.ticketNumber ? `\n                                        <div class=\"activation-ticket\">\n                                            <i class=\"fas fa-ticket-alt\"></i>\n                                            <span>Ticket: ${this.escapeHtml(role.ticketNumber)}</span>\n                                        </div>\n                                    ` : ''}\n                                </div>\n\n                                <div class=\"role-card-footer\">\n                                    <button class=\"btn btn-secondary btn-sm\"\n                                            onclick=\"app.pages.activations.extendActivation('${role.id}', '${this.escapeHtml(role.displayName)}')\"\n                                            ${role.canExtend ? '' : 'disabled'}\n                                            title=\"${role.canExtend ? 'Extend activation' : 'Cannot extend further'}\">\n                                        <i class=\"fas fa-clock\"></i> Extend\n                                    </button>\n                                    <button class=\"btn btn-danger btn-sm\"\n                                            onclick=\"app.pages.activations.deactivateRole('${role.id}', '${this.escapeHtml(role.displayName)}')\">\n                                        <i class=\"fas fa-stop-circle\"></i> Deactivate\n                                    </button>\n                                </div>\n                            </div>\n                        `;\n                    }).join('')}\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Switch between tabs\n     * @param {string} tabName - Tab name\n     */\n    switchTab(tabName) {\n        this.currentTab = tabName;\n        this.app.router.refreshCurrentPage();\n    }\n\n    /**\n     * Show activation form\n     * @param {string} roleId - Role ID\n     * @param {string} roleName - Role display name\n     */\n    async showActivationForm(roleId, roleName, privilegeLevel = 'medium') {\n        // Get role policy requirements\n        const policyResult = await graphService.getRoleAssignmentDetails(roleId);\n\n        if (!policyResult.success) {\n            this.showToast(`Failed to load role policy: ${policyResult.error}`, 'error');\n            return;\n        }\n\n        // Policy requirements are returned directly (not nested under .role)\n        const policy = policyResult;\n\n        const content = `\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    <i class=\"fas fa-play-circle\"></i> Activate Role\n                </h2>\n                <button class=\"modal-close\" onclick=\"app.closeModal()\" title=\"Close\" aria-label=\"Close dialog\">\n                    <i class=\"fas fa-times\"></i>\n                </button>\n            </div>\n\n            <div class=\"modal-body modal-lg\">\n                <div class=\"activation-header\">\n                    <div class=\"role-badge ${this.getPrivilegeClass(privilegeLevel)}\">\n                        <i class=\"fas ${this.getPrivilegeIcon(privilegeLevel)}\"></i>\n                    </div>\n                    <div>\n                        <h3>${this.escapeHtml(roleName)}</h3>\n                        <p class=\"text-muted\">Activate this role for just-in-time access</p>\n                    </div>\n                </div>\n\n                <form id=\"activation-form\">\n                    <!-- Duration -->\n                    <div class=\"form-section\">\n                        <label class=\"form-label\">\n                            <strong>Activation Duration <span class=\"required\">*</span></strong>\n                            <div style=\"display: flex; gap: 0.5rem; align-items: center; margin-top: 0.5rem;\">\n                                <input type=\"number\"\n                                       name=\"duration\"\n                                       class=\"input\"\n                                       min=\"0.5\"\n                                       max=\"${policy.maxDuration || 8}\"\n                                       step=\"0.5\"\n                                       value=\"${policy.defaultDuration || 4}\"\n                                       required\n                                       style=\"flex: 1;\"\n                                       aria-label=\"Activation duration in hours\">\n                                <span>hours</span>\n                            </div>\n                            <small class=\"form-hint\">Maximum: ${policy.maxDuration || 8} hours</small>\n                        </label>\n\n                        <div class=\"duration-presets\">\n                            <button type=\"button\" class=\"btn btn-sm btn-secondary\" onclick=\"document.querySelector('[name=duration]').value = 1\">1h</button>\n                            <button type=\"button\" class=\"btn btn-sm btn-secondary\" onclick=\"document.querySelector('[name=duration]').value = 4\">4h</button>\n                            <button type=\"button\" class=\"btn btn-sm btn-secondary\" onclick=\"document.querySelector('[name=duration]').value = 8\">8h</button>\n                            ${policy.maxDuration > 8 ? `<button type=\"button\" class=\"btn btn-sm btn-secondary\" onclick=\"document.querySelector('[name=duration]').value = ${policy.maxDuration}\">${policy.maxDuration}h</button>` : ''}\n                        </div>\n                    </div>\n\n                    <!-- Justification -->\n                    ${policy.requiresJustification !== false ? `\n                        <div class=\"form-section\">\n                            <label class=\"form-label\">\n                                <strong>Business Justification ${policy.requiresJustification ? '<span class=\"required\">*</span>' : ''}</strong>\n                                <textarea name=\"justification\"\n                                          class=\"input\"\n                                          rows=\"4\"\n                                          placeholder=\"Explain why you need this role activated...\"\n                                          ${policy.requiresJustification ? 'required' : ''}\n                                          aria-label=\"Business justification for activation\"></textarea>\n                                <small class=\"form-hint\">Provide a clear business reason for activating this role</small>\n                            </label>\n                        </div>\n                    ` : ''}\n\n                    <!-- Ticket Number -->\n                    ${policy.requiresTicket ? `\n                        <div class=\"form-section\">\n                            <label class=\"form-label\">\n                                <strong>Ticket/Change Number <span class=\"required\">*</span></strong>\n                                <input type=\"text\"\n                                       name=\"ticketNumber\"\n                                       class=\"input\"\n                                       placeholder=\"e.g., CHG0001234, INC0005678\"\n                                       required\n                                       aria-label=\"Ticket or change number\">\n                                <small class=\"form-hint\">Enter your change management or incident ticket number</small>\n                            </label>\n                        </div>\n                    ` : ''}\n\n                    <!-- Requirements Notice -->\n                    ${policy.requiresApproval || policy.requiresMFA ? `\n                        <div class=\"requirements-notice\">\n                            <h4><i class=\"fas fa-info-circle\"></i> Additional Requirements</h4>\n                            <ul>\n                                ${policy.requiresMFA ? '<li><i class=\"fas fa-key\"></i> You will be prompted for Multi-Factor Authentication (MFA)</li>' : ''}\n                                ${policy.requiresApproval ? `\n                                    <li>\n                                        <i class=\"fas fa-user-check\"></i> This activation requires approval\n                                        ${policy.approvers && policy.approvers.length > 0 ? `\n                                            <ul class=\"approvers-list\">\n                                                ${policy.approvers.map(a => `<li>${this.escapeHtml(a.displayName || a.userPrincipalName || a)}</li>`).join('')}\n                                            </ul>\n                                        ` : ''}\n                                    </li>\n                                ` : ''}\n                            </ul>\n                        </div>\n                    ` : ''}\n\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" onclick=\"app.closeModal()\">\n                            <i class=\"fas fa-times\"></i> Cancel\n                        </button>\n                        <button type=\"submit\" class=\"btn btn-primary\">\n                            <i class=\"fas fa-play-circle\"></i> ${policy.requiresApproval ? 'Request Activation' : 'Activate Now'}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        `;\n\n        this.showModal(content);\n\n        // Handle form submission\n        document.getElementById('activation-form').addEventListener('submit', async (e) => {\n            e.preventDefault();\n            await this.handleActivationSubmit(roleId, roleName, e.target);\n        });\n    }\n\n    /**\n     * Handle activation form submission\n     * @param {string} roleId - Role ID\n     * @param {string} roleName - Role name\n     * @param {HTMLFormElement} form - Form element\n     */\n    async handleActivationSubmit(roleId, roleName, form) {\n        const formData = new FormData(form);\n\n        const activationRequest = {\n            roleId: roleId,\n            duration: parseFloat(formData.get('duration')),\n            justification: formData.get('justification')?.trim() || null,\n            ticketNumber: formData.get('ticketNumber')?.trim() || null\n        };\n\n        this.closeModal();\n        this.showLoading('Activating role...');\n\n        const result = await graphService.activateRole(activationRequest);\n\n        this.hideLoading();\n\n        if (result.success) {\n            if (result.requiresApproval) {\n                this.showToast(`Activation request submitted for \"${roleName}\". Waiting for approval.`, 'info');\n            } else {\n                this.showToast(`Role \"${roleName}\" activated successfully!`, 'success');\n            }\n\n            // Refresh the page\n            await this.app.router.refreshCurrentPage();\n\n            // Switch to active tab\n            this.currentTab = 'active';\n        } else {\n            this.showToast(`Failed to activate role: ${result.error}`, 'error');\n        }\n    }\n\n    /**\n     * Deactivate role\n     * @param {string} assignmentId - Assignment ID\n     * @param {string} roleName - Role name\n     */\n    deactivateRole(assignmentId, roleName) {\n        const confirmDialog = UIComponents.renderConfirmDialog({\n            title: 'Deactivate Role',\n            message: `Are you sure you want to deactivate \"${roleName}\"? You will lose access immediately and will need to reactivate if needed again.`,\n            confirmLabel: 'Deactivate Role',\n            confirmVariant: 'btn-danger',\n            icon: 'fa-stop-circle',\n            iconColor: 'warning',\n            onConfirm: `app.pages.activations.confirmDeactivate('${assignmentId}', '${this.escapeHtml(roleName)}')`\n        });\n\n        this.showModal(confirmDialog);\n    }\n\n    /**\n     * Confirm deactivation\n     * @param {string} assignmentId - Assignment ID\n     * @param {string} roleName - Role name\n     */\n    async confirmDeactivate(assignmentId, roleName) {\n        this.closeModal();\n        this.showLoading('Deactivating role...');\n\n        const result = await graphService.deactivateRole(assignmentId);\n\n        this.hideLoading();\n\n        if (result.success) {\n            this.showToast(`Role \"${roleName}\" deactivated successfully`, 'success');\n            await this.app.router.refreshCurrentPage();\n        } else {\n            this.showToast(`Failed to deactivate role: ${result.error}`, 'error');\n        }\n    }\n\n    /**\n     * Extend activation\n     * @param {string} assignmentId - Assignment ID\n     * @param {string} roleName - Role name\n     */\n    async extendActivation(assignmentId, roleName) {\n        this.showToast('Extension functionality coming soon', 'info');\n    }\n\n    /**\n     * Calculate time remaining\n     * @param {string} endDateTime - End date time\n     * @returns {Object} Time remaining object\n     */\n    calculateTimeRemaining(endDateTime) {\n        const end = new Date(endDateTime);\n        const now = new Date();\n        const diff = end - now;\n\n        const hours = Math.floor(diff / (1000 * 60 * 60));\n        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n\n        return { hours, minutes, total: diff };\n    }\n\n    /**\n     * Format time remaining\n     * @param {Object} timeRemaining - Time remaining object\n     * @returns {string} Formatted string\n     */\n    formatTimeRemaining(timeRemaining) {\n        if (timeRemaining.total < 0) {\n            return 'Expired';\n        }\n\n        if (timeRemaining.hours === 0) {\n            return `${timeRemaining.minutes} minutes`;\n        }\n\n        if (timeRemaining.minutes === 0) {\n            return `${timeRemaining.hours} hour${timeRemaining.hours > 1 ? 's' : ''}`;\n        }\n\n        return `${timeRemaining.hours}h ${timeRemaining.minutes}m`;\n    }\n\n    /**\n     * Get privilege class\n     * @param {string} level - Privilege level\n     * @returns {string} CSS class\n     */\n    getPrivilegeClass(level) {\n        const classes = {\n            critical: 'privilege-critical',\n            high: 'privilege-high',\n            medium: 'privilege-medium',\n            low: 'privilege-low'\n        };\n        return classes[level] || 'privilege-low';\n    }\n\n    /**\n     * Get privilege icon\n     * @param {string} level - Privilege level\n     * @returns {string} Icon class\n     */\n    getPrivilegeIcon(level) {\n        const icons = {\n            critical: 'fa-skull-crossbones',\n            high: 'fa-exclamation-triangle',\n            medium: 'fa-shield-alt',\n            low: 'fa-check-circle'\n        };\n        return icons[level] || 'fa-check-circle';\n    }\n\n    /**\n     * Format privilege level\n     * @param {string} level - Privilege level\n     * @returns {string} Formatted level\n     */\n    formatPrivilegeLevel(level) {\n        return level ? level.charAt(0).toUpperCase() + level.slice(1) : 'Low';\n    }\n\n    /**\n     * Refresh page\n     */\n    async refreshPage() {\n        await this.app.router.refreshCurrentPage();\n    }\n}\n"],"names":["ActivationsPage","BasePage","app","container","params","eligibleRoles","activeRoles","eligibleResult","activeResult","graphService","roles","role","timeRemaining","isExpiringSoon","tabName","roleId","roleName","privilegeLevel","policyResult","policy","content","a","e","form","formData","activationRequest","result","assignmentId","confirmDialog","UIComponents","endDateTime","diff","hours","minutes","level"],"mappings":"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"}